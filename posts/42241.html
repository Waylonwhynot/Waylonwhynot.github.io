<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>py-基础04 | YouNeed</title><meta name="keywords" content="note"><meta name="author" content="Waylon Yan"><meta name="copyright" content="Waylon Yan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="python基础函数高级操作(生成器、迭代器、装饰器)+模块(request json)">
<meta property="og:type" content="article">
<meta property="og:title" content="py-基础04">
<meta property="og:url" content="http://yoursite.com/posts/42241.html">
<meta property="og:site_name" content="YouNeed">
<meta property="og:description" content="python基础函数高级操作(生成器、迭代器、装饰器)+模块(request json)">
<meta property="og:locale">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png">
<meta property="article:published_time" content="2019-08-29T12:34:34.000Z">
<meta property="article:modified_time" content="2025-08-05T17:54:15.815Z">
<meta property="article:author" content="Waylon Yan">
<meta property="article:tag" content="note">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/posts/42241"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'py-基础04',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-08-06 01:54:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">268</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">42</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">26</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Catagroires</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">YouNeed</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Catagroires</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">py-基础04</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2019-08-29T12:34:34.000Z" title="Created 2019-08-29 20:34:34">2019-08-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-08-05T17:54:15.815Z" title="Updated 2025-08-06 01:54:15">2025-08-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/python/">python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="py-基础04"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>python基础<br>函数高级操作(生成器、迭代器、装饰器)+模块(request json)</p>
<a id="more"></a>

<h4 id="复习"><a href="#复习" class="headerlink" title="复习"></a><div id='title'>复习</div></h4><p>函数部分：</p>
<p>0.函数嵌套</p>
<ul>
<li>一个函数中可以调用另一个函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span>():</span></span><br><span class="line">    print(<span class="string">&#x27;fuc1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func2</span>():</span></span><br><span class="line">    func1()</span><br><span class="line">    print(<span class="string">&#x27;func2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">func2()</span><br></pre></td></tr></table></figure>

<ul>
<li>只要遇见了()就是函数的调用. 如果没有()就不是函数的调用</li>
<li>函数的执行顺序</li>
</ul>
<p>1.内置函数</p>
<ul>
<li>数学计算<ul>
<li>sum</li>
<li>abs</li>
<li>divmod</li>
<li>round</li>
<li>pow</li>
<li>min， max</li>
</ul>
</li>
<li>数据结构相关<ul>
<li>list() 将一个可迭代对象转换成列表</li>
<li>tuple() 将一个可迭代对象转换成元组</li>
<li><strong>bytes() 把字符串类型转换成bytes类型</strong> 重要</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">python2中经常使用的编码方式</span><br><span class="line">s = <span class="string">&#x27;你好武大&#x27;</span></span><br><span class="line">bs = s.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">print(bs)</span><br><span class="line">结果:<span class="string">b&#x27;\xe4\xbd\xa0\xe5\xa5\xbd\xe6\xad\xa6\xe5\xa4\xa7&#x27;</span></span><br><span class="line">s1 = bs.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">print(s1)</span><br><span class="line">结果: 你好武大</span><br><span class="line"></span><br><span class="line">python3中使用如下方式</span><br><span class="line">s = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">bs = bytes(s,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">print(bs)</span><br><span class="line"><span class="comment"># 将字符串转换成字节</span></span><br><span class="line">bs1 = str(bs,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">print(bs1)</span><br></pre></td></tr></table></figure>

<ul>
<li>enumerate  对列表的高级操作</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="string">&#x27;zhangsan&#x27;</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;wangwu&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i,k <span class="keyword">in</span> enumerate(lst):</span><br><span class="line">    print(<span class="string">&#x27;这是序号&#x27;</span>,i)</span><br><span class="line">    print(<span class="string">&#x27;这是元素&#x27;</span>,k)</span><br></pre></td></tr></table></figure>

<p>2.匿名函数 lambada  面试问的较多 (<strong>和sorted函数配合使用</strong>)</p>
<blockquote>
<p>没有名字的函数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">在项目中单独使用lambada的情况，不是很多。</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">和 sorted 一起使用的时候，比较多。</span><br><span class="line">项目中有很多需要对数据进行排序的需求</span><br><span class="line"></span><br><span class="line">salaries = &#123;</span><br><span class="line">  <span class="string">&#x27;szk&#x27;</span>:<span class="number">30000</span>,</span><br><span class="line">  <span class="string">&#x27;zhangsan&#x27;</span>:<span class="number">888888888</span>,</span><br><span class="line">  <span class="string">&#x27;nick&#x27;</span>:<span class="number">2000</span>,</span><br><span class="line">  <span class="string">&#x27;pounds&#x27;</span>:<span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line">sorted(salaries, key=<span class="keyword">lambda</span> name:salaries[name])</span><br></pre></td></tr></table></figure>


<p>3.迭代器 和for循环机制 <strong>面试中的重点</strong></p>
<blockquote>
<p>如果一个变量中， 包含有<code>__iter__</code>方法的话，那代表这个就是一个迭代器，可以使用<code>__next__</code>来获取其中的每一个元素<br>使用<code>dir()</code>来进行查看，该方法会将这个元素中所有的方法和属性全部列出来</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&#x27;123&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dir(a)</span><br><span class="line">[<span class="string">&#x27;__add__&#x27;</span>, <span class="string">&#x27;__class__&#x27;</span>, <span class="string">&#x27;__contains__&#x27;</span>, <span class="string">&#x27;__delattr__&#x27;</span>, <span class="string">&#x27;__dir__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>, <span class="string">&#x27;__eq__&#x27;</span>, <span class="string">&#x27;__format__&#x27;</span>, <span class="string">&#x27;__ge__&#x27;</span>, <span class="string">&#x27;__getattribute__&#x27;</span>, <span class="string">&#x27;__getitem__&#x27;</span>, <span class="string">&#x27;__getnewargs__&#x27;</span>, <span class="string">&#x27;__gt__&#x27;</span>, <span class="string">&#x27;__hash__&#x27;</span>, <span class="string">&#x27;__init__&#x27;</span>, <span class="string">&#x27;__init_subclass__&#x27;</span>, <span class="string">&#x27;__iter__&#x27;</span>, <span class="string">&#x27;__le__&#x27;</span>, <span class="string">&#x27;__len__&#x27;</span>, <span class="string">&#x27;__lt__&#x27;</span>, <span class="string">&#x27;__mod__&#x27;</span>, <span class="string">&#x27;__mul__&#x27;</span>, <span class="string">&#x27;__ne__&#x27;</span>, <span class="string">&#x27;__new__&#x27;</span>, <span class="string">&#x27;__reduce__&#x27;</span>, <span class="string">&#x27;__reduce_ex__&#x27;</span>, <span class="string">&#x27;__repr__&#x27;</span>, <span class="string">&#x27;__rmod__&#x27;</span>, <span class="string">&#x27;__rmul__&#x27;</span>, <span class="string">&#x27;__setattr__&#x27;</span>, <span class="string">&#x27;__sizeof__&#x27;</span>, <span class="string">&#x27;__str__&#x27;</span>, <span class="string">&#x27;__subclasshook__&#x27;</span>, <span class="string">&#x27;capitalize&#x27;</span>, <span class="string">&#x27;casefold&#x27;</span>, <span class="string">&#x27;center&#x27;</span>, <span class="string">&#x27;count&#x27;</span>, <span class="string">&#x27;encode&#x27;</span>, <span class="string">&#x27;endswith&#x27;</span>, <span class="string">&#x27;expandtabs&#x27;</span>, <span class="string">&#x27;find&#x27;</span>, <span class="string">&#x27;format&#x27;</span>, <span class="string">&#x27;format_map&#x27;</span>, <span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;isalnum&#x27;</span>, <span class="string">&#x27;isalpha&#x27;</span>, <span class="string">&#x27;isascii&#x27;</span>, <span class="string">&#x27;isdecimal&#x27;</span>, <span class="string">&#x27;isdigit&#x27;</span>, <span class="string">&#x27;isidentifier&#x27;</span>, <span class="string">&#x27;islower&#x27;</span>, <span class="string">&#x27;isnumeric&#x27;</span>, <span class="string">&#x27;isprintable&#x27;</span>, <span class="string">&#x27;isspace&#x27;</span>, <span class="string">&#x27;istitle&#x27;</span>, <span class="string">&#x27;isupper&#x27;</span>, <span class="string">&#x27;join&#x27;</span>, <span class="string">&#x27;ljust&#x27;</span>, <span class="string">&#x27;lower&#x27;</span>, <span class="string">&#x27;lstrip&#x27;</span>, <span class="string">&#x27;maketrans&#x27;</span>, <span class="string">&#x27;partition&#x27;</span>, <span class="string">&#x27;replace&#x27;</span>, <span class="string">&#x27;rfind&#x27;</span>, <span class="string">&#x27;rindex&#x27;</span>, <span class="string">&#x27;rjust&#x27;</span>, <span class="string">&#x27;rpartition&#x27;</span>, <span class="string">&#x27;rsplit&#x27;</span>, <span class="string">&#x27;rstrip&#x27;</span>, <span class="string">&#x27;split&#x27;</span>, <span class="string">&#x27;splitlines&#x27;</span>, <span class="string">&#x27;startswith&#x27;</span>, <span class="string">&#x27;strip&#x27;</span>, <span class="string">&#x27;swapcase&#x27;</span>, <span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;translate&#x27;</span>, <span class="string">&#x27;upper&#x27;</span>, <span class="string">&#x27;zfill&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = a.__iter__()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">&lt;str_iterator object at <span class="number">0x10b4447f0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.__next__()</span><br><span class="line"><span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.__next__()</span><br><span class="line"><span class="string">&#x27;2&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.__next__()</span><br><span class="line"><span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.__next__()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br></pre></td></tr></table></figure>

<p>面试考察时，考察点就是：如何判断一个元素是否是迭代器？<br>答： 包含有<code>__iter__</code>方法的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">print(dir(a))  <span class="comment"># dir查看对象的方法和函数</span></span><br><span class="line"><span class="comment"># 在打印结果中寻找__iter__ 如果存在就表示当前的这个类型是个可迭代对象</span></span><br></pre></td></tr></table></figure>

<p>4.生成器  <strong>面试中的重点</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 生成器定义</span></span><br><span class="line"><span class="comment">### 生成器的本质就是迭代器，因此我们可以使用迭代器中的__next__方法来获取元素</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    print(<span class="number">11</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">22</span>  <span class="comment">### 将return换成yield关键字即可</span></span><br><span class="line"></span><br><span class="line">ret = func()</span><br><span class="line"><span class="comment"># print(ret.__next__())</span></span><br><span class="line"><span class="comment"># print(ret)  ### &lt;generator object func at 0x103cc80b0&gt; 生成器的对象</span></span><br></pre></td></tr></table></figure>

<p>总结：生成器一定是迭代器，但是迭代器就不一定是生成器</p>
<p>应用场景：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 运维经常要读写大文本文件，几个G用生成器读写，速度很快。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 几十G的先切分为N个小文件，再处理。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">start_time = time.time()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">find_ip</span>(<span class="params">path</span>):</span></span><br><span class="line">    <span class="comment"># urllist = []</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> open(path):</span><br><span class="line">        s = line.find(<span class="string">&#x27;&quot;Sogou web spider&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> s &gt;=<span class="number">0</span> :</span><br><span class="line">            <span class="keyword">yield</span> line[:s].strip()</span><br><span class="line"></span><br><span class="line">p = find_ip(<span class="string">&quot;bigfile.txt&quot;</span>)</span><br><span class="line">p = list(set(list(p)))</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> p:</span><br><span class="line">    print(item)</span><br><span class="line"></span><br><span class="line">print(time.time() - start_time, <span class="string">&quot;seconds&quot;</span>)</span><br></pre></td></tr></table></figure>




<p>5.列表生成式和字典生成式 []  <strong>项目中的重点</strong></p>
<blockquote>
<p>写法比较pythonic的风格</p>
</blockquote>
<ul>
<li>列表生成式</li>
</ul>
<blockquote>
<p>目的是把一些复杂的代码，写的简单化</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">**传统的写法**</span><br><span class="line">l = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    l.append(i)</span><br><span class="line"></span><br><span class="line">**pythonnic的写法**</span><br><span class="line">格式：[结果 <span class="keyword">for</span> 变量 <span class="keyword">in</span> 可迭代对象]</span><br><span class="line"></span><br><span class="line">l = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**高级的写法**</span><br><span class="line">格式：[结果 <span class="keyword">for</span> 变量 <span class="keyword">in</span> 可迭代对象 <span class="keyword">if</span> 条件]</span><br><span class="line">l = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>) <span class="keyword">if</span> i &gt; <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>字典生成式</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># **传统方式构造字典**</span></span><br><span class="line">keys=[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;sex&#x27;</span>]</span><br><span class="line">vals=[<span class="string">&#x27;szk&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>]</span><br><span class="line">dic=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i,k <span class="keyword">in</span> enumerate(keys):</span><br><span class="line">    <span class="comment"># print(i,k)</span></span><br><span class="line">    dic[k]=vals[i] <span class="comment">## dic[&#x27;name&#x27;] = vals[0] = &#x27;szk&#x27;</span></span><br><span class="line">print(dic)</span><br><span class="line"></span><br><span class="line"><span class="comment">### **pythonnic方式**</span></span><br><span class="line"></span><br><span class="line">dic = &#123;k:vals[i] <span class="keyword">for</span> i,k <span class="keyword">in</span> enumerate(keys) <span class="keyword">if</span> 条件判断&#125;</span><br></pre></td></tr></table></figure>

<p>总结：笔试和项目中比较常见的问题。推荐大家，代码比较简单的话，使用上面两种方式，而如果代码比较复杂的话，不建议大家使用</p>
<p>5.5 递归函数  <strong>面试中常见问题</strong></p>
<blockquote>
<p>函数自己调用自己</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    print(<span class="string">&#x27;hello, f1&#x27;</span>)</span><br><span class="line">    f1()</span><br><span class="line"></span><br><span class="line">f1()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上述代码会报错误，因为，无限制的递归下去，会导致操作系统不断的在内存中开辟栈空间，因此会将内存撑爆，程序死掉。所以，为了防止这种情况出现，python设置了一个最大的递归深度，默认1000。如果想要设置这个递归的深度的话，需要改变一下递归的深度设置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(sys.getrecursionlimit())  <span class="comment"># 查看最大递归深度 1000</span></span><br><span class="line">sys.setrecursionlimit(<span class="number">2000</span>)  <span class="comment"># 修改最大递归深度</span></span><br></pre></td></tr></table></figure>

<p>所以，如果以后想使用递归的时候，<strong>需要在程序中加入一个终止条件</strong>。</p>
<p>举个例子：</p>
<p>求1到n=5的和？</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">想要获取<span class="number">1</span>到<span class="number">5</span>的和， 只需要知道，<span class="number">1</span>到<span class="number">4</span>的和， 然后加上<span class="number">5</span>，<span class="number">5</span> + sum(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">5</span> + sum(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">4</span> + sum(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> + sum(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> + sum(<span class="number">1</span>) = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum1</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> sum1(n<span class="number">-1</span>) + n</span><br><span class="line">        </span><br><span class="line">sum1(5) ===&gt; sum1(4) + 5 </span><br><span class="line">sum1(4) ===&gt; sum1(3) + 4</span><br><span class="line">sum1(3) ===&gt; sum1(2) + 3</span><br><span class="line">sum1(2) ===&gt; sum1(1) + 2</span><br><span class="line">sum1(1) ===&gt; 1</span><br></pre></td></tr></table></figure>

<p>求n的阶乘？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span>! = <span class="number">5</span> * <span class="number">4</span> * <span class="number">3</span> * <span class="number">2</span> * <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>! = <span class="number">5</span> * <span class="number">4</span>!</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>! = <span class="number">4</span> * <span class="number">3</span>!</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>! = <span class="number">3</span> * <span class="number">2</span>!</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>! = <span class="number">2</span> * <span class="number">1</span>!</span><br><span class="line"></span><br><span class="line">n! = n * (n<span class="number">-1</span>)!</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sum1</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> sum1(n<span class="number">-1</span>) * n</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>求斐波那契数列</p>
<blockquote>
<p>0, 1, 1, 2, 3, 5, 8,13,21…… </p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">斐波那契数学规律</span><br><span class="line"></span><br><span class="line">当n=<span class="number">0</span>或者n=<span class="number">1</span>, <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">当n&gt;2, f(3) = f(1) + f(2) = 1 + 1 = 2  ==&gt; f(n) = f(n-1) + f(n-2)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">0</span> <span class="keyword">or</span> n==<span class="number">1</span> :</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> fib(n<span class="number">-1</span>) + fib(n<span class="number">-2</span>)</span><br><span class="line"></span><br><span class="line">fib(4) ==&gt; fib(3) + fib(2)</span><br></pre></td></tr></table></figure>

<p>总结：递归比较难理解，因为自己调用自己，如果没有终止条件的话，很可能造成整个程序崩掉。在项目中用的比较少。递归使用最多的场景，是在算法，尤其是树的相关算法中，用的最多。所以面试考察递归的时候，除了，用上面这几个简单的例子外，最多考察的是遍历树之类的问题</p>
<p>有兴趣的话，可以刷一下，算法题中的树</p>
<p>6.函数名的作用以及闭包函数   <strong>面试和项目中的重点</strong></p>
<ul>
<li>函数名的作用</li>
</ul>
<blockquote>
<p>函数名本身就是一个内存地址, 是可以当做参数进行传递的,并且还可以赋值给别的变量</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    print(<span class="string">&#x27;f1&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">f1</span>):</span></span><br><span class="line">    f1()    </span><br><span class="line">    print(<span class="string">&quot;呵呵&quot;</span>)</span><br><span class="line">    print(func)</span><br><span class="line">    </span><br><span class="line">a = func    <span class="comment"># 把函数当成一个值赋值给另一个变量</span></span><br><span class="line">a()     <span class="comment"># 函数调用 func()</span></span><br></pre></td></tr></table></figure>

<ul>
<li>闭包函数</li>
</ul>
<blockquote>
<p>外层函数中嵌套一个内层函数，然后，外层函数的返回值是这个内层函数。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outter</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        name = <span class="string">&#x27;szk&#x27;</span></span><br><span class="line">        print(name)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">outter()  <span class="comment">### wrapper()</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>并且，函数执行完之后，内部的变量不会随着外面变量的改变而改变。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    name = <span class="string">&#x27;szk&#x27;</span></span><br><span class="line">    print(name)</span><br><span class="line"></span><br><span class="line">f1()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outter</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        name = <span class="string">&#x27;szk&#x27;</span></span><br><span class="line">        print(name)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">f1 = outter()</span><br><span class="line"></span><br><span class="line">name = <span class="string">&#x27;kkk&#x27;</span></span><br><span class="line">f1()  <span class="comment">### szk</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>总结：函数的变量名和闭包函数的使用主要是为装饰器打的基础。这两个知识点，面试中比较常问。而以闭包函数问的最多。</p>
<p>7.**装饰器 面试和项目中的重中之重 **</p>
<p>最简单的装饰器的写法和使用：</p>
<blockquote>
<p>计算时间的装饰器</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 装饰器的写法：</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count_time</span>(<span class="params">func</span>):</span>  <span class="comment">### 参数是需要计算的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">warpper</span>(<span class="params">*args, **kwargs</span>):</span> <span class="comment">### 需要计算的函数的参数</span></span><br><span class="line">        start = time.time()</span><br><span class="line">        func(*args, **kwargs)  <span class="comment">### 需要计算时间的函数</span></span><br><span class="line">        end = time.time()</span><br><span class="line">        print(end - start)</span><br><span class="line">    <span class="keyword">return</span> warpper</span><br><span class="line"></span><br><span class="line"><span class="comment">### 装饰器的使用：</span></span><br><span class="line"><span class="meta">@count_time   ### python提供的语法糖写法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">    print(<span class="string">&#x27;xxx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>带参数的装饰器</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">auth</span>(<span class="params">engine</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">outter</span>(<span class="params">func</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>)</span></span><br><span class="line"><span class="function">            ....</span></span><br><span class="line"><span class="function">        <span class="title">return</span> <span class="title">wrapper</span></span></span><br><span class="line"><span class="function">        </span></span><br><span class="line"><span class="function">    <span class="title">return</span> <span class="title">outter</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">@<span class="title">count_time</span>(<span class="params">engine=<span class="string">&#x27;file&#x27;</span></span>)  ### <span class="title">python</span>提供的语法糖写法</span></span><br><span class="line"><span class="function"><span class="title">def</span> <span class="title">f1</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">    print(<span class="string">&#x27;xxx&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">wrapper(*args,**kwargs) 这个参数的功能是给原始函数用的；outter(func)，用来装被修饰的函数，auth(engine) 传给内层需要的函数。三层足够使用，最外层可以无限的延伸参数。</span><br></pre></td></tr></table></figure>

<p>总结：装饰器在面试和项目中用的最多。甚至在面试的时候，会当场让你写装饰器。在项目中多用来判断用户是否登录以及记录日志等功能。</p>
<p>函数部分的总结：</p>
<ul>
<li>函数的写法和定义以及基础的参数，位置参数，关键字参数，动态获取参数 </li>
<li>部分内置函数</li>
<li>迭代器和生成器</li>
<li>列表生成式和字典生成式</li>
<li>递归</li>
<li>闭包函数</li>
<li>装饰器</li>
</ul>
<h4 id="模块部分："><a href="#模块部分：" class="headerlink" title="模块部分："></a>模块部分：</h4><blockquote>
<p>python 之所以强大，很大一部分原因是python有非常丰富的内置模块和第三方模块和包</p>
</blockquote>
<ol start="0">
<li>模块的定义</li>
</ol>
<blockquote>
<p>模块的本质就是一系列的python程序。</p>
</blockquote>
<ol>
<li>首次导入发生的事情</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#文件名：foo.py</span><br><span class="line">x&#x3D;1</span><br><span class="line">def get():</span><br><span class="line">    print(x)</span><br><span class="line">def change():</span><br><span class="line">    global x</span><br><span class="line">    x&#x3D;0</span><br><span class="line">class Foo:</span><br><span class="line">    def func(self):</span><br><span class="line">       print(&#39;from the func&#39;)</span><br><span class="line">       </span><br><span class="line">1、执行源文件代码</span><br><span class="line">2、产生一个新的名称空间用于存放源文件执行过程中产生的名字</span><br><span class="line">3、在当前执行文件所在的名称空间中得到一个名字foo，该名字指向新创建的模块名称空间，若要引用模块名称空间中的名字，需要加上该前缀，如下</span><br><span class="line">import foo #导入模块foo</span><br><span class="line">a&#x3D;foo.x #引用模块foo中变量x的值赋值给当前名称空间中的名字a</span><br><span class="line">foo.get() #调用模块foo的get函数</span><br><span class="line">foo.change() #调用模块foo中的change函数</span><br><span class="line">obj&#x3D;foo.Foo() #使用模块foo的类Foo来实例化，进一步可以执行obj.func()</span><br></pre></td></tr></table></figure>

<ol>
<li>模块的使用</li>
</ol>
<blockquote>
<p><strong>import 模块名</strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> md  <span class="comment">### 直接导入模块文件名即可</span></span><br><span class="line">print(md.read())  <span class="comment">### 调用模块中常见的方法和属性，使用.的方式来获取和使用</span></span><br></pre></td></tr></table></figure>

<p>优点：</p>
<ul>
<li>使用.的方式获取所有的函数或者属性</li>
<li>引入的方法不会和当前运行文件中的函数或者属性冲突</li>
</ul>
<blockquote>
<p><strong>from 模块 import 引入的函数或者属性</strong><br>1.产生一个模块的名称空间<br>2.运行foo.py将运行过程中产生的名字都丢到模块的名称空间去<br><strong>3.在当前名称空间拿到一个名字，该名字与模块名称空间中某一个内存地址关联</strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> md <span class="keyword">import</span> read</span><br><span class="line">read()</span><br></pre></td></tr></table></figure>
<p><strong>import x x=模块foo中值0的内存地址</strong><br><img src="https://cdn.jsdelivr.net/gh/Waylonwhynot/whatyouneed_blog_pic/pic/from%E5%AF%BC%E5%8C%85x%E7%9A%84%E5%85%B3%E7%B3%BB.png" alt="py-day04"><br><img src="https://cdn.jsdelivr.net/gh/Waylonwhynot/whatyouneed_blog_pic/pic/import.png" alt="py-day04"></p>
<ul>
<li>from 模块 import *<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from foo import * #把foo中所有的名字都导入到当前执行文件的名称空间中，在当前位置直接可以使用这些名字</span><br><span class="line"></span><br><span class="line">a&#x3D;x</span><br><span class="line">get()</span><br><span class="line">change()</span><br><span class="line">obj&#x3D;Foo()</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#foo.py</span><br><span class="line">__all__&#x3D;[&#39;x&#39;,&#39;get&#39;] #该列表中所有的元素必须是字符串类型，每个元素对应foo.py中的一个名字</span><br><span class="line">x&#x3D;1</span><br><span class="line">def get():</span><br><span class="line">    print(x)</span><br><span class="line">def change():</span><br><span class="line">    global x</span><br><span class="line">    x&#x3D;0</span><br><span class="line">class Foo:</span><br><span class="line">    def func(self):</span><br><span class="line">       print(&#39;from the func&#39;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>无需加前缀的好处是使得我们的代码更加简洁，坏处则是容易与当前名称空间中的名字冲突，如果当前名称空间存在相同的名字，则后定义的名字会覆盖之前定义的名字。</p>
<ul>
<li>优点：使用啥就导入啥，提高程序的执行效率</li>
</ul>
<blockquote>
<p><strong>import foo as f #为导入的模块foo在当前位置起别名f，以后再使用时就用这个别名f</strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> foo <span class="keyword">as</span> f <span class="comment">#为导入的模块foo在当前位置起别名f，以后再使用时就用这个别名f</span></span><br><span class="line">f.x</span><br><span class="line">f.get()</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>模块的查找顺序</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">模块的查询顺序</span><br><span class="line">    <span class="number">1.</span>先从内存中找可能已经加载了的</span><br><span class="line">    <span class="number">2.</span>python 内置模块  </span><br><span class="line">    <span class="number">3.</span>sys.path列表里面每一个路径下去找, 需要知道sys.path列表中第一个路径就是当前被执行文件所在的文件夹（pycharm会加上根路径，不要考虑）</span><br><span class="line"> <span class="comment"># 备注: </span></span><br><span class="line"><span class="comment">### 1.如果该文件以脚本方式运行，当前文件所在的文件夹会被加入到环境变量</span></span><br><span class="line"><span class="comment">### 2.如果是包内部，推荐使用相对导入</span></span><br><span class="line"><span class="comment">### 3.如果是py文件以脚本方式运行，必须使用绝对导入（原因如下）</span></span><br><span class="line">原因: python的相对导入会通过模块的__name__ 属性来判断该模块的位置, 当模块作为顶层文件被执行时,其__name__这个值是__main__,不包含任何包的名字，所以以脚本方式运行文件, 里面有相对导入的话, 就会报错。</span><br><span class="line">      如果这个文件被当做模块导入，__name__就是模块和其所在包的名字,比如: pkg1.model2</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">如何解决上述找不到的路径的问题：</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">###两种方式</span></span><br><span class="line"><span class="comment">#### 1.将该模块的绝对路径加入到sys.path中</span></span><br><span class="line">sys.path.append(<span class="string">r&#x27;/Users/shangzekai/PycharmProjects/day04/md1/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> md  <span class="comment">###</span></span><br><span class="line">print(md.read1())</span><br><span class="line"></span><br><span class="line"><span class="comment">#### 2.从根路径下面的模块开始导入</span></span><br><span class="line"><span class="keyword">from</span> md1 <span class="keyword">import</span> md</span><br><span class="line"><span class="keyword">from</span> md1.md <span class="keyword">import</span> read, read1</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>循环导入问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">m1.py</span><br><span class="line"></span><br><span class="line">print(&#39;正在导入m1&#39;)</span><br><span class="line">from m2 import y</span><br><span class="line"></span><br><span class="line">x&#x3D;&#39;m1&#39;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">m2.py</span><br><span class="line"></span><br><span class="line">print(&#39;正在导入m2&#39;)</span><br><span class="line">from m1 import x</span><br><span class="line"></span><br><span class="line">y&#x3D;&#39;m2&#39;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">run.py</span><br><span class="line"></span><br><span class="line">import m1</span><br></pre></td></tr></table></figure>
<p>测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#1、执行run.py会抛出异常</span><br><span class="line">正在导入m1</span><br><span class="line">正在导入m2</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&#x2F;Users&#x2F;linhaifeng&#x2F;PycharmProjects&#x2F;pro01&#x2F;1 aaaa练习目录&#x2F;aa.py&quot;, line 1, in &lt;module&gt;</span><br><span class="line">    import m1</span><br><span class="line">  File &quot;&#x2F;Users&#x2F;linhaifeng&#x2F;PycharmProjects&#x2F;pro01&#x2F;1 aaaa练习目录&#x2F;m1.py&quot;, line 2, in &lt;module&gt;</span><br><span class="line">    from m2 import y</span><br><span class="line">  File &quot;&#x2F;Users&#x2F;linhaifeng&#x2F;PycharmProjects&#x2F;pro01&#x2F;1 aaaa练习目录&#x2F;m2.py&quot;, line 2, in &lt;module&gt;</span><br><span class="line">    from m1 import x</span><br><span class="line">ImportError: cannot import name &#39;x&#39;</span><br><span class="line"></span><br><span class="line">#2、分析</span><br><span class="line">先执行run.py---&gt;执行import m1，开始导入m1并运行其内部代码---&gt;打印内容&quot;正在导入m1&quot;</span><br><span class="line">---&gt;执行from m2 import y 开始导入m2并运行其内部代码---&gt;打印内容“正在导入m2”---&gt;执行from m1 import x,由于m1已经被导入过了，所以不会重新导入，所以直接去m1中拿x，然而x此时并没有存在于m1中，所以报错</span><br></pre></td></tr></table></figure>
<p>解决方法：1.变量名字上提  2.导入语句放到函数中 3.放到中转模块上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># 方案一：导入语句放到最后，保证在导入时，所有名字都已经加载过</span><br><span class="line"># 文件：m1.py</span><br><span class="line">print(&#39;正在导入m1&#39;)</span><br><span class="line"></span><br><span class="line">x&#x3D;&#39;m1&#39;</span><br><span class="line"></span><br><span class="line">from m2 import y</span><br><span class="line"></span><br><span class="line"># 文件：m2.py</span><br><span class="line">print(&#39;正在导入m2&#39;)</span><br><span class="line">y&#x3D;&#39;m2&#39;</span><br><span class="line"></span><br><span class="line">from m1 import x</span><br><span class="line"></span><br><span class="line"># 文件：run.py内容如下，执行该文件，可以正常使用</span><br><span class="line">import m1</span><br><span class="line">print(m1.x)</span><br><span class="line">print(m1.y)</span><br><span class="line"></span><br><span class="line"># 方案二：导入语句放到函数中，只有在调用函数时才会执行其内部代码</span><br><span class="line"># 文件：m1.py</span><br><span class="line">print(&#39;正在导入m1&#39;)</span><br><span class="line"></span><br><span class="line">def f1():</span><br><span class="line">    from m2 import y</span><br><span class="line">    print(x,y)</span><br><span class="line"></span><br><span class="line">x &#x3D; &#39;m1&#39;</span><br><span class="line"></span><br><span class="line"># 文件：m2.py</span><br><span class="line">print(&#39;正在导入m2&#39;)</span><br><span class="line"></span><br><span class="line">def f2():</span><br><span class="line">    from m1 import x</span><br><span class="line">    print(x,y)</span><br><span class="line"></span><br><span class="line">y &#x3D; &#39;m2&#39;</span><br><span class="line"></span><br><span class="line"># 文件：run.py内容如下，执行该文件，可以正常使用</span><br><span class="line">import m1</span><br><span class="line"></span><br><span class="line">m1.f1()</span><br></pre></td></tr></table></figure>
</li>
<li><p>点的问题 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">导入语句中的 &quot;.&quot; 是路径分隔符</span><br><span class="line">使用语句中的. 是向名称空间要名字</span><br></pre></td></tr></table></figure>
</li>
<li><p>区分py文件的两种用途<br>一个Python文件有两种用途，一种被当主程序/脚本执行，另一种被当模块导入，为了区别同一个文件的不同用途，每个py文件都内置了__name__变量.<br>__name__在py文件被当做脚本执行时赋值为“__main__”,<br>__name__在py文件被当做模块导入时赋值为模块名.</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">作为模块foo.py的开发者，可以在文件末尾基于__name__在不同应用场景下值的不同来控制文件执行不同的逻辑</span><br><span class="line"><span class="comment">#foo.py</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    foo.py被当做脚本执行时运行的代码</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    foo.py被当做模块导入时运行的代码</span><br><span class="line"></span><br><span class="line">通常我们会在<span class="keyword">if</span>的子代码块中编写针对模块功能的测试代码，这样foo.py在被当做脚本运行时，就会执行测试代码，而被当做模块导入时则不用执行测试代码。</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><p>模块的分类</p>
<ul>
<li>自定义模块</li>
<li>内置模块</li>
<li>第三方模块 </li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:  <span class="comment"># 当文件被直接执行时</span></span><br></pre></td></tr></table></figure>

<p>4.常见的内置模块</p>
<ul>
<li><p>sys ： </p>
<ul>
<li>sys.path           返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值<br>-os:</li>
<li>os.path.abspath(path)       返回path规范化的绝对路径</li>
<li>os.path.split(path)         将path分割成目录和文件名二元组返回</li>
<li>os.path.dirname(path)       返回path的目录。其实就是os.path.split(path)的第一个元素</li>
<li>os.path.basename(path)      返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素</li>
<li>os.path.exists(path)        如果path存在，返回True；如果path不存在，返回False</li>
<li>os.path.isfile(path)        如果path是一个存在的文件，返回True。否则返回False</li>
<li>os.path.isdir(path)         如果path是一个存在的目录，则返回True。否则返回False</li>
</ul>
</li>
<li><p>random : 生成随机字符串，验证码</p>
<ul>
<li>random.randint(1,2)</li>
</ul>
</li>
<li><p>json 使用的场景非常多，常见于不同的语言和python进行数据交互使用</p>
<ul>
<li>dumps：序列化</li>
<li>loads: 反序列化</li>
<li>dump</li>
<li>load   </li>
</ul>
</li>
<li><p>hashlib  编码</p>
<ul>
<li>md5</li>
<li>sha1</li>
<li>sha256</li>
</ul>
</li>
<li><p>pathlib.Path</p>
<ul>
<li>mkdir这个函数是在pathlib.Path.mkdir这里，通过import pathlib导入；<br>pathlib的mkdir接收两个参数：</li>
</ul>
<p>mkdir(parents=True, exist_ok=True)</p>
<p>parents：如果父目录不存在，是否创建父目录。<br>exist_ok：只有在目录不存在时创建目录，目录已存在时不会抛出异常。</p>
</li>
</ul>
<h4 id="包部分："><a href="#包部分：" class="headerlink" title="包部分："></a>包部分：</h4><p>“””<br>随着模块数目的增多，把所有模块不加区分地放到一起也是极不合理的，于是Python为我们提供了一种把模块组织到一起的方法，即创建一个包。包就是一个含有<strong>init</strong>.py文件的文件夹，文件夹内可以组织子模块或子包，例如<br>“””</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pool&#x2F;                #顶级包</span><br><span class="line">├── __init__.py     </span><br><span class="line">├── futures          #子包</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── process.py</span><br><span class="line">│   └── thread.py</span><br><span class="line">└── versions.py      #子模块</span><br></pre></td></tr></table></figure>

<h5 id="1-包就是包含有init-py的文件夹；"><a href="#1-包就是包含有init-py的文件夹；" class="headerlink" title="1.包就是包含有init.py的文件夹；"></a>1.包就是包含有<strong>init</strong>.py的文件夹；</h5><h5 id="2-包的本质是文件的一种形式，包是用来当做模块导入的"><a href="#2-包的本质是文件的一种形式，包是用来当做模块导入的" class="headerlink" title="2.包的本质是文件的一种形式，包是用来当做模块导入的"></a>2.包的本质是文件的一种形式，包是用来当做模块导入的</h5><ul>
<li>需要强调</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#1. 在python3中，即使包下没有__init__.py文件，import 包仍然不会报错，而在python2中，包下一定要有该文件，否则import 包报错</span><br><span class="line"></span><br><span class="line">#2. 创建包的目的不是为了运行，而是被导入使用，记住，包只是模块的一种形式而已，包的本质就是一种模块</span><br></pre></td></tr></table></figure>

<ul>
<li>导入包与<strong>init</strong>.py-包的使用<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、执行包下的__init__.py文件</span><br><span class="line">2、产生一个新的名称空间用于存放__init__.py执行过程中产生的名字</span><br><span class="line">3、在当前执行文件所在的名称空间中得到一个名字pool，该名字指向__init__.py的名称空间，例如http:&#x2F;&#x2F;pool.xxx和pool.yyy中的xxx和yyy都是来自于pool下的__init__.py，也就是说导入包时并不会导入包下所有的子模块与子包</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h5 id="强调-包的使用"><a href="#强调-包的使用" class="headerlink" title="强调 - 包的使用"></a><strong>强调</strong> - 包的使用</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>关于包相关的导入语句也分为<span class="keyword">import</span>和<span class="keyword">from</span> ... <span class="keyword">import</span> ...两种，但是无论哪种，无论在什么位置，在导入时都必须遵循一个原则：凡是在导入时带点的，点的左边都必须是一个包，否则非法。可以带有一连串的点，如<span class="keyword">import</span> 顶级包.子包.子模块,但都必须遵循这个原则。但对于导入后，在使用时就没有这种限制了，点的左边可以是包,模块，函数，类(它们都可以用点的方式调用自己的属性)。</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、包A和包B下有同名模块也不会冲突，如A.a与B.a来自俩个命名空间</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、<span class="keyword">import</span>导入文件时，产生名称空间中的名字来源于文件，<span class="keyword">import</span> 包，产生的名称空间的名字同样来源于文件，即包下的__init__.py，导入包本质就是在导入该文件</span><br><span class="line"><span class="comment">############################## 包的使用 ############################</span></span><br><span class="line">比如包内的init写:</span><br><span class="line"><span class="keyword">from</span> .sms <span class="keyword">import</span> get_code, send_code</span><br><span class="line">其他地方使用 <span class="keyword">from</span> libs.t_sms <span class="keyword">import</span> send_code, get_code</span><br><span class="line">这样就不用去包内部再导入了</span><br><span class="line"><span class="comment">##############################</span></span><br></pre></td></tr></table></figure>

<h5 id="绝对导入与相对导入"><a href="#绝对导入与相对导入" class="headerlink" title="绝对导入与相对导入"></a>绝对导入与相对导入</h5><p>1、绝对导入：以顶级包为起始</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#pool下的__init__.py</span></span><br><span class="line"><span class="keyword">from</span> pool <span class="keyword">import</span> versions</span><br></pre></td></tr></table></figure>

<p>2、相对导入：.代表当前文件所在的目录，..代表当前目录的上一级目录，依此类推</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#pool下的__init__.py</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> versions</span><br></pre></td></tr></table></figure>
<p>同理，针对pool.futures.process.ProcessPoolExecutor(3)，则需要</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#操作pool下的__init__.py，保证pool.futures</span><br><span class="line">from . import futures #或from pool import futures</span><br><span class="line"></span><br><span class="line">#操作futrues下的__init__.py，保证pool.futures.process</span><br><span class="line">from . import process #或from pool.futures import process</span><br></pre></td></tr></table></figure>
<p>在包内使用相对导入还可以跨目录导入模块，比如thread.py中想引用versions.py的名字check</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import也能使用绝对导入，导入过程中同样会依次执行包下的__init__.py,只是基于import导入的结果，使用时必须加上该前缀</span><br></pre></td></tr></table></figure>
<p>例1：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import pool.futures #拿到名字pool.futures指向futures下的__init__.py</span><br><span class="line">pool.futures.xxx #要求futures下的__init__.py中必须有名字xxx</span><br></pre></td></tr></table></figure>
<p>例2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import pool.futures.thread #拿到名字pool.futures.thread指向thread.py</span><br><span class="line"></span><br><span class="line">thread_pool&#x3D;pool.futures.thread.ThreadPoolExecutor(3)</span><br><span class="line">thread_pool.submit()</span><br></pre></td></tr></table></figure>
<p>相对导入只能用from module import symbol的形式,import ..versions语法是不对的，且symbol只能是一个明确的名字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from pool import futures.process #语法错误</span><br><span class="line">from pool.futures import process #语法正确</span><br></pre></td></tr></table></figure>
<ul>
<li>针对包内部模块之间的相互导入推荐使用相对导入，需要特别强调：<blockquote>
<p>1、相对导入只能在包内部使用，用相对导入不同目录下的模块是非法的<br>2、无论是import还是from-import，但凡是在导入时带点的，点的左边必须是包,否则语法错误</p>
</blockquote>
</li>
</ul>
<h5 id="总结包的使用需要牢记三点"><a href="#总结包的使用需要牢记三点" class="headerlink" title="总结包的使用需要牢记三点"></a>总结包的使用需要牢记三点</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1、导包就是在导包下__init__.py文件</span><br><span class="line">2、包内部的导入应该使用相对导入，相对导入也只能在包内部使用，而且...取上一级不能出包</span><br><span class="line">3、</span><br><span class="line">使用语句中的点代表的是访问属性</span><br><span class="line">m.n.x ----&gt; 向m要n，向n要x</span><br><span class="line">而导入语句中的点代表的是路径分隔符</span><br><span class="line">import a.b.c --&gt; a&#x2F;b&#x2F;c，文件夹下a下有子文件夹b，文件夹b下有子文件或文件夹c</span><br><span class="line">所以导入语句中点的左边必须是一个包</span><br></pre></td></tr></table></figure>


<h4 id="项目里面需要注意："><a href="#项目里面需要注意：" class="headerlink" title="项目里面需要注意："></a>项目里面需要注意：</h4><ol>
<li>项目内文件相互引用，选择在环境变量里append在启动文件所在的项目根目录。<br>import os<br>print(<strong>file</strong>)) #当前文件的绝对路径<br>BASE_DIR = os.path.dirname(os.path.dirname(<strong>file</strong>))<br>print(BASE_DIR)<br>sys.path.append(BASE_DIR)</li>
</ol>
<p>LOG_PATH = os.path.join(BASE_DIR,’log’,’access.log’)</p>
<h4 id="本周内容："><a href="#本周内容：" class="headerlink" title="本周内容："></a>本周内容：</h4><p>0.内置的模块<br><img src="https://cdn.jsdelivr.net/gh/Waylonwhynot/whatyouneed_blog_pic/pic/%E6%97%B6%E9%97%B4%E6%88%B3.png" alt="内置函数"></p>
<ol>
<li>时间模块 （time）<ul>
<li>import time   time.time() </li>
<li>time.sleep(3)<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入时间模块</span></span><br><span class="line">&gt;&gt;&gt;<span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#时间戳</span></span><br><span class="line">&gt;&gt;&gt;time.time()</span><br><span class="line"><span class="number">1500875844.800804</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#时间字符串</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">&quot;%Y-%m-%d %X&quot;</span>)</span><br><span class="line"><span class="string">&#x27;2017-07-24 13:54:37&#x27;</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">&quot;%Y-%m-%d %H-%M-%S&quot;</span>)</span><br><span class="line"><span class="string">&#x27;2017-07-24 13-55-04&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#时间元组:localtime将一个时间戳转换为当前时区的struct_time</span></span><br><span class="line">time.localtime()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">24</span>,</span><br><span class="line">　　　　　　　　　　tm_hour=<span class="number">13</span>, tm_min=<span class="number">59</span>, tm_sec=<span class="number">37</span>, </span><br><span class="line">                 tm_wday=<span class="number">0</span>, tm_yday=<span class="number">205</span>, tm_isdst=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<ul>
<li>重点转换 字符串&lt;–&gt;时间戳<br>字符串–&gt;时间戳<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 如果别人给你传了一个2016-05-22，转换成时间戳</span></span><br><span class="line"><span class="comment">#将 日期字符串 转成 struct时间对象格式</span></span><br><span class="line">string_to_struct = time.strptime(<span class="string">&quot;2016-05-22&quot;</span>,<span class="string">&quot;%Y-%m-%d&quot;</span>) </span><br><span class="line"><span class="comment"># print(string_to_struct)</span></span><br><span class="line"><span class="comment">#将struct时间对象转成时间戳</span></span><br><span class="line">struct_to_stamp = time.mktime(string_to_struct) </span><br><span class="line">print(struct_to_stamp)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>时间戳 -&gt; 日期字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;,time.gmtime()) )</span><br></pre></td></tr></table></figure>
<p>总结：时间的转换以及时间的加减</p>
<ol>
<li><p>时间模块datetime</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义日期</span></span><br><span class="line">res = datetime.date(<span class="number">2019</span>, <span class="number">7</span>, <span class="number">15</span>)</span><br><span class="line">print(res)  <span class="comment"># 2019-07-15</span></span><br><span class="line"></span><br><span class="line">dt_now = datetime.datetime.now()</span><br><span class="line">tdelta = datetime.timedelta(days=<span class="number">7</span>)</span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(days=<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>random模块<br>场景：验证码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def make_code(size&#x3D;6):</span><br><span class="line">    res &#x3D; &#39;&#39;</span><br><span class="line">    for i in range(size):</span><br><span class="line">        num &#x3D; str(random.randint(0,9))</span><br><span class="line">        alpha &#x3D; chr(random.randint(65,90))</span><br><span class="line">        res +&#x3D; random.choice([num,alpha])</span><br><span class="line">    return res</span><br><span class="line">print(make_code())</span><br></pre></td></tr></table></figure>

</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</span><br><span class="line"><span class="comment">#随机小数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.random()      <span class="comment"># 大于0且小于1之间的小数</span></span><br><span class="line"><span class="number">0.7664338663654585</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.uniform(<span class="number">1</span>,<span class="number">3</span>) <span class="comment">#大于1小于3的小数</span></span><br><span class="line"><span class="number">1.6270147180533838</span><span class="comment">#恒富：发红包</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#随机整数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.randint(<span class="number">1</span>,<span class="number">5</span>)  <span class="comment"># 大于等于1且小于等于5之间的整数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.randrange(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>) <span class="comment"># 大于等于1且小于10之间的奇数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#随机选择一个返回</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.choice([<span class="number">1</span>,<span class="string">&#x27;23&#x27;</span>,[<span class="number">4</span>,<span class="number">5</span>]])  <span class="comment"># #1或者23或者[4,5]</span></span><br><span class="line"><span class="comment">#随机选择多个返回，返回的个数为函数的第二个参数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.sample([<span class="number">1</span>,<span class="string">&#x27;23&#x27;</span>,[<span class="number">4</span>,<span class="number">5</span>]],<span class="number">2</span>) <span class="comment"># #列表元素任意2个组合</span></span><br><span class="line">[[<span class="number">4</span>, <span class="number">5</span>], <span class="string">&#x27;23&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#打乱列表顺序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(item) <span class="comment"># 打乱次序</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item</span><br><span class="line">[<span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(item)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item</span><br><span class="line">[<span class="number">5</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>os模块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">os.makedirs(<span class="string">&#x27;dirname1/dirname2&#x27;</span>)    可生成多层递归目录</span><br><span class="line">os.removedirs(<span class="string">&#x27;dirname1&#x27;</span>)    若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</span><br><span class="line">os.mkdir(<span class="string">&#x27;dirname&#x27;</span>)    生成单级目录；相当于shell中mkdir dirname</span><br><span class="line">os.rmdir(<span class="string">&#x27;dirname&#x27;</span>)    删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname</span><br><span class="line">os.listdir(<span class="string">&#x27;dirname&#x27;</span>)    列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</span><br><span class="line">os.remove()  删除一个文件</span><br><span class="line">os.rename(<span class="string">&quot;oldname&quot;</span>,<span class="string">&quot;newname&quot;</span>)  重命名文件/目录</span><br><span class="line">os.stat(<span class="string">&#x27;path/filename&#x27;</span>)  获取文件/目录信息</span><br><span class="line"></span><br><span class="line">os.system(<span class="string">&quot;bash command&quot;</span>)  运行shell命令，直接显示</span><br><span class="line">os.popen(<span class="string">&quot;bash command).read()  运行shell命令，获取执行结果</span></span><br><span class="line"><span class="string">os.getcwd() 获取当前工作目录，即当前python脚本工作的目录路径</span></span><br><span class="line"><span class="string">os.chdir(&quot;</span>dirname<span class="string">&quot;)  改变当前脚本工作目录；相当于shell下cd</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">os.path</span></span><br><span class="line"><span class="string">os.path.abspath(path) 返回path规范化的绝对路径os.path.split(path) 将path分割成目录和文件名二元组返回 </span></span><br><span class="line"><span class="string">os.path.dirname(path) 返回path的目录。其实就是os.path.split(path)的第一个元素 </span></span><br><span class="line"><span class="string">os.path.basename(path) 返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素</span></span><br><span class="line"><span class="string">os.path.exists(path)  如果path存在，返回True；如果path不存在，返回False</span></span><br><span class="line"><span class="string">os.path.isabs(path)  如果path是绝对路径，返回True</span></span><br><span class="line"><span class="string">os.path.isfile(path)  如果path是一个存在的文件，返回True。否则返回False</span></span><br><span class="line"><span class="string">os.path.isdir(path)  如果path是一个存在的目录，则返回True。否则返回False</span></span><br><span class="line"><span class="string">os.path.join(path1[, path2[, ...]])  将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</span></span><br><span class="line"><span class="string">os.path.getatime(path)  返回path所指向的文件或者目录的最后访问时间</span></span><br><span class="line"><span class="string">os.path.getmtime(path)  返回path所指向的文件或者目录的最后修改时间</span></span><br><span class="line"><span class="string">os.path.getsize(path) 返回path的大小</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>sys模块<br>sys模块是与python解释器交互的一个接口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sys.argv           命令行参数List，第一个元素是程序本身路径</span><br><span class="line">sys.exit(n)        退出程序，正常退出时exit(<span class="number">0</span>),错误退出sys.exit(<span class="number">1</span>)</span><br><span class="line">sys.version        获取Python解释程序的版本信息</span><br><span class="line">sys.path           返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</span><br><span class="line">sys.platform       返回操作系统平台名称</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> SystemExit <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br></pre></td></tr></table></figure></li>
<li><p>pathlib模块(3.5之后一个新的模块)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line">res = Path(__file__).parent.parent</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line">路径拼接</span><br><span class="line">res = Path(<span class="string">&#x27;/a/b/c&#x27;</span>) / <span class="string">&#x27;d/e.txt&#x27;</span></span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="6">
<li>configparser模块<br>该模块适用于配置文件的格式与windows ini文件类似，可以包含一个或多个节（section），每个节可以有多个参数（键=值）。<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="attr">ServerAliveInterval</span> = <span class="number">45</span></span><br><span class="line"><span class="attr">Compression</span> = <span class="literal">yes</span></span><br><span class="line"><span class="attr">CompressionLevel</span> = <span class="number">9</span></span><br><span class="line"><span class="attr">ForwardX11</span> = <span class="literal">yes</span></span><br><span class="line">  </span><br><span class="line"><span class="section">[bitbucket.org]</span></span><br><span class="line"><span class="attr">User</span> = hg</span><br><span class="line">  </span><br><span class="line"><span class="section">[topsecret.server.com]</span></span><br><span class="line"><span class="attr">Port</span> = <span class="number">50022</span></span><br><span class="line"><span class="attr">ForwardX11</span> = <span class="literal">no</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>如果想用python生成一个这样的文档怎么做呢？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line"></span><br><span class="line">config[<span class="string">&quot;DEFAULT&quot;</span>] = &#123;<span class="string">&#x27;ServerAliveInterval&#x27;</span>: <span class="string">&#x27;45&#x27;</span>,</span><br><span class="line">                      <span class="string">&#x27;Compression&#x27;</span>: <span class="string">&#x27;yes&#x27;</span>,</span><br><span class="line">                     <span class="string">&#x27;CompressionLevel&#x27;</span>: <span class="string">&#x27;9&#x27;</span>,</span><br><span class="line">                     <span class="string">&#x27;ForwardX11&#x27;</span>:<span class="string">&#x27;yes&#x27;</span></span><br><span class="line">                     &#125;</span><br><span class="line"></span><br><span class="line">config[<span class="string">&#x27;bitbucket.org&#x27;</span>] = &#123;<span class="string">&#x27;User&#x27;</span>:<span class="string">&#x27;hg&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">config[<span class="string">&#x27;topsecret.server.com&#x27;</span>] = &#123;<span class="string">&#x27;Host Port&#x27;</span>:<span class="string">&#x27;50022&#x27;</span>,<span class="string">&#x27;ForwardX11&#x27;</span>:<span class="string">&#x27;no&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;example.ini&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> configfile:</span><br><span class="line"></span><br><span class="line">   config.write(configfile)</span><br></pre></td></tr></table></figure>
<p>查找文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------查找文件内容,基于字典的形式</span></span><br><span class="line"></span><br><span class="line">print(config.sections())        <span class="comment">#  []</span></span><br><span class="line"></span><br><span class="line">config.read(<span class="string">&#x27;example.ini&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(config.sections())        <span class="comment">#   [&#x27;bitbucket.org&#x27;, &#x27;topsecret.server.com&#x27;]</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;bytebong.com&#x27;</span> <span class="keyword">in</span> config) <span class="comment"># False</span></span><br><span class="line">print(<span class="string">&#x27;bitbucket.org&#x27;</span> <span class="keyword">in</span> config) <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(config[<span class="string">&#x27;bitbucket.org&#x27;</span>][<span class="string">&quot;user&quot;</span>])  <span class="comment"># hg</span></span><br><span class="line"></span><br><span class="line">print(config[<span class="string">&#x27;DEFAULT&#x27;</span>][<span class="string">&#x27;Compression&#x27;</span>]) <span class="comment">#yes</span></span><br><span class="line"></span><br><span class="line">print(config[<span class="string">&#x27;topsecret.server.com&#x27;</span>][<span class="string">&#x27;ForwardX11&#x27;</span>])  <span class="comment">#no</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(config[<span class="string">&#x27;bitbucket.org&#x27;</span>])          <span class="comment">#&lt;Section: bitbucket.org&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> config[<span class="string">&#x27;bitbucket.org&#x27;</span>]:     <span class="comment"># 注意,有default会默认default的键</span></span><br><span class="line">    print(key)</span><br><span class="line"></span><br><span class="line">print(config.options(<span class="string">&#x27;bitbucket.org&#x27;</span>))  <span class="comment"># 同for循环,找到&#x27;bitbucket.org&#x27;下所有键</span></span><br><span class="line"></span><br><span class="line">print(config.items(<span class="string">&#x27;bitbucket.org&#x27;</span>))    <span class="comment">#找到&#x27;bitbucket.org&#x27;下所有键值对</span></span><br><span class="line"></span><br><span class="line">print(config.get(<span class="string">&#x27;bitbucket.org&#x27;</span>,<span class="string">&#x27;compression&#x27;</span>)) <span class="comment"># yes       get方法Section下的key对应的value</span></span><br></pre></td></tr></table></figure>
<p>增删改操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line"></span><br><span class="line">config.read(<span class="string">&#x27;example.ini&#x27;</span>)</span><br><span class="line"></span><br><span class="line">config.add_section(<span class="string">&#x27;yuan&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">config.remove_section(<span class="string">&#x27;bitbucket.org&#x27;</span>)</span><br><span class="line">config.remove_option(<span class="string">&#x27;topsecret.server.com&#x27;</span>,<span class="string">&quot;forwardx11&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">config.set(<span class="string">&#x27;topsecret.server.com&#x27;</span>,<span class="string">&#x27;k1&#x27;</span>,<span class="string">&#x27;11111&#x27;</span>)</span><br><span class="line">config.set(<span class="string">&#x27;yuan&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>,<span class="string">&#x27;22222&#x27;</span>)</span><br><span class="line"></span><br><span class="line">config.write(open(<span class="string">&#x27;new2.ini&#x27;</span>, <span class="string">&quot;w&quot;</span>))</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>logging模块</li>
</ol>
<ul>
<li>函数式简单配置<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging  </span><br><span class="line">logging.debug(<span class="string">&#x27;debug message&#x27;</span>)  </span><br><span class="line">logging.info(<span class="string">&#x27;info message&#x27;</span>)  </span><br><span class="line">logging.warning(<span class="string">&#x27;warning message&#x27;</span>)  </span><br><span class="line">logging.error(<span class="string">&#x27;error message&#x27;</span>)  </span><br><span class="line">logging.critical(<span class="string">&#x27;critical message&#x27;</span>) </span><br></pre></td></tr></table></figure>
默认情况下Python的logging模块将日志打印到了标准输出中，且只显示了大于等于WARNING级别的日志，这说明默认的日志级别设置为WARNING（日志级别等级CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG），默认的日志格式为日志级别：Logger名称：用户输出消息。</li>
</ul>
<p><strong>灵活配置日志级别，日志格式，输出位置:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">file_handler = logging.FileHandler(filename=<span class="string">&#x27;x1.log&#x27;</span>, mode=<span class="string">&#x27;a&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>,)</span><br><span class="line">logging.basicConfig(</span><br><span class="line">    format=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span>,</span><br><span class="line">    handlers=[file_handler,],</span><br><span class="line">    level=logging.ERROR</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">logging.error(<span class="string">&#x27;你好&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>日志切割</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> logging <span class="keyword">import</span> handlers</span><br><span class="line"></span><br><span class="line">sh = logging.StreamHandler()</span><br><span class="line">rh = handlers.RotatingFileHandler(<span class="string">&#x27;myapp.log&#x27;</span>, maxBytes=<span class="number">1024</span>,backupCount=<span class="number">5</span>)</span><br><span class="line">fh = handlers.TimedRotatingFileHandler(filename=<span class="string">&#x27;x2.log&#x27;</span>, when=<span class="string">&#x27;s&#x27;</span>, interval=<span class="number">5</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">logging.basicConfig(</span><br><span class="line">    format=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span>,</span><br><span class="line">    handlers=[fh,sh,rh],</span><br><span class="line">    level=logging.ERROR</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">100000</span>):</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    logging.error(<span class="string">&#x27;KeyboardInterrupt error %s&#x27;</span>%str(i))</span><br></pre></td></tr></table></figure>

<p>配置参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">logging.basicConfig()函数中可通过具体参数来更改logging模块默认行为，可用参数有：</span><br><span class="line"></span><br><span class="line">filename：用指定的文件名创建FiledHandler，这样日志会被存储在指定的文件中。</span><br><span class="line">filemode：文件打开方式，在指定了filename时使用这个参数，默认值为“a”还可指定为“w”。</span><br><span class="line">format：指定handler使用的日志显示格式。</span><br><span class="line">datefmt：指定日期时间格式。</span><br><span class="line">level：设置rootlogger（后边会讲解具体概念）的日志级别</span><br><span class="line">stream：用指定的stream创建StreamHandler。可以指定输出到sys.stderr,sys.stdout或者文件(f&#x3D;open(‘test.log’,’w’))，默认为sys.stderr。若同时列出了filename和stream两个参数，则stream参数会被忽略。</span><br><span class="line"></span><br><span class="line">format参数中可能用到的格式化串：</span><br><span class="line">%(name)s Logger的名字</span><br><span class="line">%(levelno)s 数字形式的日志级别</span><br><span class="line">%(levelname)s 文本形式的日志级别</span><br><span class="line">%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</span><br><span class="line">%(filename)s 调用日志输出函数的模块的文件名</span><br><span class="line">%(module)s 调用日志输出函数的模块名</span><br><span class="line">%(funcName)s 调用日志输出函数的函数名</span><br><span class="line">%(lineno)d 调用日志输出函数的语句所在的代码行</span><br><span class="line">%(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示</span><br><span class="line">%(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数</span><br><span class="line">%(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</span><br><span class="line">%(thread)d 线程ID。可能没有</span><br><span class="line">%(threadName)s 线程名。可能没有</span><br><span class="line">%(process)d 进程ID。可能没有</span><br><span class="line">%(message)s用户输出的消息</span><br></pre></td></tr></table></figure>
<ul>
<li>logger对象配置<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">logger = logging.getLogger()</span><br><span class="line"><span class="comment"># 创建一个handler，用于写入日志文件</span></span><br><span class="line">fh = logging.FileHandler(<span class="string">&#x27;test.log&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment"># 再创建一个handler，用于输出到控制台 ch = logging.StreamHandler() formatter = logging.Formatter(&#x27;%(asctime)s - %(name)s - %(levelname)s - %(message)s&#x27;)</span></span><br><span class="line">fh.setLevel(logging.DEBUG)fh.setFormatter(formatter) ch.setFormatter(formatter) </span><br><span class="line">logger.addHandler(fh) <span class="comment">#logger对象可以添加多个fh和ch对象 logger.addHandler(ch) logger.debug(&#x27;logger debug message&#x27;) logger.info(&#x27;logger info message&#x27;) logger.warning(&#x27;logger warning message&#x27;) logger.error(&#x27;logger error message&#x27;) logger.critical(&#x27;logger critical message&#x27;)</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>logging库提供了多个组件：Logger、Handler、Filter、Formatter。Logger对象提供应用程序可直接使用的接口，Handler发送日志到适当的目的地，Filter提供了过滤日志信息的方法，Formatter指定日志显示格式。另外，可以通过：logger.setLevel(logging.Debug)设置级别,当然，也可以通过</p>
<p>fh.setLevel(logging.Debug)单对文件流设置某个级别。</p>
<h5 id="日志模块直奔主题版"><a href="#日志模块直奔主题版" class="headerlink" title="日志模块直奔主题版"></a>日志模块直奔主题版</h5><p>1、日志级别与配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一：日志配置</span></span><br><span class="line">logging.basicConfig(</span><br><span class="line">    <span class="comment"># 1、日志输出位置：1、终端 2、文件</span></span><br><span class="line">    <span class="comment"># filename=&#x27;access.log&#x27;, # 不指定，默认打印到终端</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2、日志格式</span></span><br><span class="line">    format=<span class="string">&#x27;%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3、时间格式</span></span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S %p&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4、日志级别</span></span><br><span class="line">    <span class="comment"># critical =&gt; 50</span></span><br><span class="line">    <span class="comment"># error =&gt; 40</span></span><br><span class="line">    <span class="comment"># warning =&gt; 30</span></span><br><span class="line">    <span class="comment"># info =&gt; 20</span></span><br><span class="line">    <span class="comment"># debug =&gt; 10</span></span><br><span class="line">    level=<span class="number">30</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二：输出日志</span></span><br><span class="line">logging.debug(<span class="string">&#x27;调试debug&#x27;</span>)</span><br><span class="line">logging.info(<span class="string">&#x27;消息info&#x27;</span>)</span><br><span class="line">logging.warning(<span class="string">&#x27;警告warn&#x27;</span>)</span><br><span class="line">logging.error(<span class="string">&#x27;错误error&#x27;</span>)</span><br><span class="line">logging.critical(<span class="string">&#x27;严重critical&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># 注意下面的root是默认的日志名字</span></span><br><span class="line"><span class="string">WARNING:root:警告warn</span></span><br><span class="line"><span class="string">ERROR:root:错误error</span></span><br><span class="line"><span class="string">CRITICAL:root:严重critical</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>生产配置<br>2、日志配置字典<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">logging配置</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1、定义三种日志输出格式，日志中可能用到的格式化串如下</span></span><br><span class="line"><span class="comment"># %(name)s Logger的名字</span></span><br><span class="line"><span class="comment"># %(levelno)s 数字形式的日志级别</span></span><br><span class="line"><span class="comment"># %(levelname)s 文本形式的日志级别</span></span><br><span class="line"><span class="comment"># %(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</span></span><br><span class="line"><span class="comment"># %(filename)s 调用日志输出函数的模块的文件名</span></span><br><span class="line"><span class="comment"># %(module)s 调用日志输出函数的模块名</span></span><br><span class="line"><span class="comment"># %(funcName)s 调用日志输出函数的函数名</span></span><br><span class="line"><span class="comment"># %(lineno)d 调用日志输出函数的语句所在的代码行</span></span><br><span class="line"><span class="comment"># %(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示</span></span><br><span class="line"><span class="comment"># %(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数</span></span><br><span class="line"><span class="comment"># %(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</span></span><br><span class="line"><span class="comment"># %(thread)d 线程ID。可能没有</span></span><br><span class="line"><span class="comment"># %(threadName)s 线程名。可能没有</span></span><br><span class="line"><span class="comment"># %(process)d 进程ID。可能没有</span></span><br><span class="line"><span class="comment"># %(message)s用户输出的消息</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、强调：其中的%(name)s为getlogger时指定的名字</span></span><br><span class="line">standard_format = <span class="string">&#x27;[%(asctime)s][%(threadName)s:%(thread)d][task_id:%(name)s][%(filename)s:%(lineno)d]&#x27;</span> \</span><br><span class="line">                  <span class="string">&#x27;[%(levelname)s][%(message)s]&#x27;</span></span><br><span class="line"></span><br><span class="line">simple_format = <span class="string">&#x27;[%(levelname)s][%(asctime)s][%(filename)s:%(lineno)d]%(message)s&#x27;</span></span><br><span class="line"></span><br><span class="line">test_format = <span class="string">&#x27;%(asctime)s] %(message)s&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、日志配置字典</span></span><br><span class="line">LOGGING_DIC = &#123;</span><br><span class="line">    <span class="string">&#x27;version&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;disable_existing_loggers&#x27;</span>: <span class="literal">False</span>,</span><br><span class="line">    <span class="string">&#x27;formatters&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;standard&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;format&#x27;</span>: standard_format</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;simple&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;format&#x27;</span>: simple_format</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;test&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;format&#x27;</span>: test_format</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;filters&#x27;</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">&#x27;handlers&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">#打印到终端的日志</span></span><br><span class="line">        <span class="string">&#x27;console&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.StreamHandler&#x27;</span>,  <span class="comment"># 打印到屏幕</span></span><br><span class="line">            <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;simple&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">#打印到文件的日志,收集info及以上的日志</span></span><br><span class="line">        <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.handlers.RotatingFileHandler&#x27;</span>,  <span class="comment"># 保存到文件,日志轮转</span></span><br><span class="line">            <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;standard&#x27;</span>,</span><br><span class="line">            <span class="comment"># 可以定制日志文件路径</span></span><br><span class="line">            <span class="comment"># BASE_DIR = os.path.dirname(os.path.abspath(__file__))  # log文件的目录</span></span><br><span class="line">            <span class="comment"># LOG_PATH = os.path.join(BASE_DIR,&#x27;a1.log&#x27;)</span></span><br><span class="line">            <span class="string">&#x27;filename&#x27;</span>: <span class="string">&#x27;a1.log&#x27;</span>,  <span class="comment"># 日志文件</span></span><br><span class="line">            <span class="string">&#x27;maxBytes&#x27;</span>: <span class="number">1024</span>*<span class="number">1024</span>*<span class="number">5</span>,  <span class="comment"># 日志大小 5M</span></span><br><span class="line">            <span class="string">&#x27;backupCount&#x27;</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">&#x27;encoding&#x27;</span>: <span class="string">&#x27;utf-8&#x27;</span>,  <span class="comment"># 日志文件的编码，再也不用担心中文log乱码了</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;other&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;logging.FileHandler&#x27;</span>,  <span class="comment"># 保存到文件</span></span><br><span class="line">            <span class="string">&#x27;formatter&#x27;</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;filename&#x27;</span>: <span class="string">&#x27;a2.log&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;encoding&#x27;</span>: <span class="string">&#x27;utf-8&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;loggers&#x27;</span>: &#123;</span><br><span class="line">        <span class="comment">#logging.getLogger(__name__)拿到的logger配置</span></span><br><span class="line">        <span class="string">&#x27;&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;handlers&#x27;</span>: [<span class="string">&#x27;default&#x27;</span>, <span class="string">&#x27;console&#x27;</span>],  <span class="comment"># 这里把上面定义的两个handler都加上，即log数据既写入文件又打印到屏幕</span></span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>, <span class="comment"># loggers(第一层日志级别关限制)---&gt;handlers(第二层日志级别关卡限制)</span></span><br><span class="line">            <span class="string">&#x27;propagate&#x27;</span>: <span class="literal">False</span>,  <span class="comment"># 默认为True，向上（更高level的logger）传递，通常设置为False即可，否则会一份日志向上层层传递</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;专门的采集&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;handlers&#x27;</span>: [<span class="string">&#x27;other&#x27;</span>,],</span><br><span class="line">            <span class="string">&#x27;level&#x27;</span>: <span class="string">&#x27;DEBUG&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;propagate&#x27;</span>: <span class="literal">False</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">日志配置字典LOGGING_DIC</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>3、使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="comment"># !!!强调!!!</span></span><br><span class="line"><span class="comment"># 1、logging是一个包，需要使用其下的config、getLogger，可以如下导入</span></span><br><span class="line"><span class="comment"># from logging import config</span></span><br><span class="line"><span class="comment"># from logging import getLogger</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、也可以使用如下导入</span></span><br><span class="line"><span class="keyword">import</span> logging.config <span class="comment"># 这样连同logging.getLogger都一起导入了,然后使用前缀logging.config.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、加载配置</span></span><br><span class="line">logging.config.dictConfig(settings.LOGGING_DIC)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4、输出日志</span></span><br><span class="line">logger1=logging.getLogger(<span class="string">&#x27;用户交易&#x27;</span>)</span><br><span class="line">logger1.info(<span class="string">&#x27;egon儿子alex转账3亿冥币&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># logger2=logging.getLogger(&#x27;专门的采集&#x27;) # 名字传入的必须是&#x27;专门的采集&#x27;，与LOGGING_DIC中的配置唯一对应</span></span><br><span class="line"><span class="comment"># logger2.debug(&#x27;专门采集的日志&#x27;)</span></span><br><span class="line"></span><br><span class="line">common.py</span><br></pre></td></tr></table></figure>

<p>解释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># formatters 多个日志格式，想用哪一个，直接去取</span><br><span class="line"># handlers 是日志的接收者，不同的handler控制日志输出到不同的位置.console，log</span><br><span class="line"># loggers  日志生产者，产生的日志将会传递给handler然后控制输出</span><br><span class="line"></span><br><span class="line"># 注意：loggers(第一层日志级别关限制)---&gt;handlers(第二层日志级别关卡限制)；loggers 和 handler 通常设置成一样就可以了。</span><br><span class="line"># 如果需要配置多个应用打到一个日志，为了避免重复配置，可配置空key</span><br></pre></td></tr></table></figure>



<ol start="8">
<li>序列化模块<br>什么叫序列化——将原本的字典、列表等内容转换成一个字符串的过程就叫做序列化。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">比如，我们在python代码中计算的一个数据需要给另外一段程序使用，那我们怎么给？</span><br><span class="line">现在我们能想到的方法就是存在文件里，然后另一个python程序再从文件里读出来。</span><br><span class="line">但是我们都知道，对于文件来说是没有字典这个概念的，所以我们只能将数据转换成字典放到文件中。</span><br><span class="line">你一定会问，将字典转换成一个字符串很简单，就是str(dic)就可以办到了，为什么我们还要学习序列化模块呢？</span><br><span class="line">没错序列化的过程就是从dic 变成str(dic)的过程。现在你可以通过str(dic)，将一个名为dic的字典转换成一个字符串，</span><br><span class="line">但是你要怎么把一个字符串转换成字典呢？</span><br><span class="line">聪明的你肯定想到了eval()，如果我们将一个字符串类型的字典str_dic传给eval，就会得到一个返回的字典类型了。</span><br><span class="line">eval()函数十分强大，但是eval是做什么的？e官方demo解释为：将字符串str当成有效的表达式来求值并返回计算结果。</span><br><span class="line">ＢＵＴ！强大的函数有代价。安全性是其最大的缺点。</span><br><span class="line">想象一下，如果我们从文件中读出的不是一个数据结构，而是一句&quot;删除文件&quot;类似的破坏性语句，那么后果实在不堪设设想。</span><br><span class="line">而使用eval就要担这个风险。</span><br><span class="line">所以，我们并不推荐用eval方法来进行反序列化操作(将str转换成python中的数据结构)</span><br><span class="line"></span><br><span class="line">为什么要有序列化模块</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>序列化的目的<br>1、以某种存储形式使自定义对象持久化；<br>2、将对象从一个地方传递到另一个地方。<br>3、使程序更具维护性。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Waylonwhynot/whatyouneed_blog_pic/pic/%E5%BA%8F%E5%88%97%E5%8C%96.png" alt="py-day04"></p>
<ul>
<li><strong>json</strong><blockquote>
<p><strong>注意，json转换完的字符串类型的字典中的字符串是由””表示的</strong></p>
</blockquote>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Waylonwhynot/whatyouneed_blog_pic/pic/json.png" alt="py-day04"></p>
<p>Json模块提供了四个功能：dumps、dump、loads、load</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">dic = &#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;v1&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;v2&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>:<span class="string">&#x27;v3&#x27;</span>&#125;</span><br><span class="line">str_dic = json.dumps(dic)  <span class="comment">#序列化：将一个字典转换成一个字符串</span></span><br><span class="line">print(type(str_dic),str_dic)  <span class="comment">#&lt;class &#x27;str&#x27;&gt; &#123;&quot;k3&quot;: &quot;v3&quot;, &quot;k1&quot;: &quot;v1&quot;, &quot;k2&quot;: &quot;v2&quot;&#125;</span></span><br><span class="line"><span class="comment">#注意，json转换完的字符串类型的字典中的字符串是由&quot;&quot;表示的</span></span><br><span class="line"></span><br><span class="line">dic2 = json.loads(str_dic)  <span class="comment">#反序列化：将一个字符串格式的字典转换成一个字典</span></span><br><span class="line"><span class="comment">#注意，要用json的loads功能处理的字符串类型的字典中的字符串必须由&quot;&quot;表示</span></span><br><span class="line">print(type(dic2),dic2)  <span class="comment">#&lt;class &#x27;dict&#x27;&gt; &#123;&#x27;k1&#x27;: &#x27;v1&#x27;, &#x27;k2&#x27;: &#x27;v2&#x27;, &#x27;k3&#x27;: &#x27;v3&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">list_dic = [<span class="number">1</span>,[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>],<span class="number">3</span>,&#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;v1&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;v2&#x27;</span>&#125;]</span><br><span class="line">str_dic = json.dumps(list_dic) <span class="comment">#也可以处理嵌套的数据类型 </span></span><br><span class="line">print(type(str_dic),str_dic) <span class="comment">#&lt;class &#x27;str&#x27;&gt; [1, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;], 3, &#123;&quot;k1&quot;: &quot;v1&quot;, &quot;k2&quot;: &quot;v2&quot;&#125;]</span></span><br><span class="line">list_dic2 = json.loads(str_dic)</span><br><span class="line">print(type(list_dic2),list_dic2) <span class="comment">#&lt;class &#x27;list&#x27;&gt; [1, [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;], 3, &#123;&#x27;k1&#x27;: &#x27;v1&#x27;, &#x27;k2&#x27;: &#x27;v2&#x27;&#125;]</span></span><br><span class="line"></span><br><span class="line">loads和dumps</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">f = open(<span class="string">&#x27;json_file&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">dic = &#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;v1&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;v2&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>:<span class="string">&#x27;v3&#x27;</span>&#125;</span><br><span class="line">json.dump(dic,f)  <span class="comment">#dump方法接收一个文件句柄，直接将字典转换成json字符串写入文件</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">&#x27;json_file&#x27;</span>)</span><br><span class="line">dic2 = json.load(f)  <span class="comment">#load方法接收一个文件句柄，直接将文件中的json字符串转换成数据结构返回</span></span><br><span class="line">f.close()</span><br><span class="line">print(type(dic2),dic2)</span><br><span class="line"></span><br><span class="line">load和dump</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">f = open(<span class="string">&#x27;file&#x27;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">json.dump(&#123;<span class="string">&#x27;国籍&#x27;</span>:<span class="string">&#x27;中国&#x27;</span>&#125;,f)</span><br><span class="line">ret = json.dumps(&#123;<span class="string">&#x27;国籍&#x27;</span>:<span class="string">&#x27;中国&#x27;</span>&#125;)</span><br><span class="line">f.write(ret+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">json.dump(&#123;<span class="string">&#x27;国籍&#x27;</span>:<span class="string">&#x27;美国&#x27;</span>&#125;,f,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">ret = json.dumps(&#123;<span class="string">&#x27;国籍&#x27;</span>:<span class="string">&#x27;美国&#x27;</span>&#125;,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">f.write(ret+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">ensure_ascii关键字参数</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Serialize obj to a JSON formatted str.(字符串表示的json对象) </span><br><span class="line">Skipkeys：默认值是<span class="literal">False</span>，如果dict的keys内的数据不是python的基本类型(str,unicode,int,long,float,bool,<span class="literal">None</span>)，设置为<span class="literal">False</span>时，就会报TypeError的错误。此时设置成<span class="literal">True</span>，则会跳过这类key </span><br><span class="line">ensure_ascii:，当它为<span class="literal">True</span>的时候，所有非ASCII码字符显示为\uXXXX序列，只需在dump时将ensure_ascii设置为<span class="literal">False</span>即可，此时存入json的中文即可正常显示。) </span><br><span class="line">If check_circular <span class="keyword">is</span> false, then the circular reference check <span class="keyword">for</span> container types will be skipped <span class="keyword">and</span> a circular reference will result <span class="keyword">in</span> an OverflowError (<span class="keyword">or</span> worse). </span><br><span class="line">If allow_nan <span class="keyword">is</span> false, then it will be a ValueError to serialize out of range float values (nan, inf, -inf) <span class="keyword">in</span> strict compliance of the JSON specification, instead of using the JavaScript equivalents (NaN, Infinity, -Infinity). </span><br><span class="line">indent：应该是一个非负的整型，如果是<span class="number">0</span>就是顶格分行显示，如果为空就是一行最紧凑显示，否则会换行且按照indent的数值显示前面的空白分行显示，这样打印出来的json数据也叫pretty-printed json </span><br><span class="line">separators：分隔符，实际上是(item_separator, dict_separator)的一个元组，默认的就是(‘,’,’:’)；这表示dictionary内keys之间用“,”隔开，而KEY和value之间用“：”隔开。 </span><br><span class="line">default(obj) <span class="keyword">is</span> a function that should <span class="keyword">return</span> a serializable version of obj <span class="keyword">or</span> <span class="keyword">raise</span> TypeError. The default simply raises TypeError. </span><br><span class="line">sort_keys：将数据根据keys的值进行排序。 </span><br><span class="line">To use a custom JSONEncoder subclass (e.g. one that overrides the .default() method to serialize additional types), specify it <span class="keyword">with</span> the cls kwarg; otherwise JSONEncoder <span class="keyword">is</span> used.</span><br><span class="line"></span><br><span class="line">其他参数说明</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">data = &#123;<span class="string">&#x27;username&#x27;</span>:[<span class="string">&#x27;李华&#x27;</span>,<span class="string">&#x27;二愣子&#x27;</span>],<span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">16</span>&#125;</span><br><span class="line">json_dic2 = json.dumps(data,sort_keys=<span class="literal">True</span>,indent=<span class="number">2</span>,separators=(<span class="string">&#x27;,&#x27;</span>,<span class="string">&#x27;:&#x27;</span>),ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">print(json_dic2)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>pickle</strong><br>json &amp; pickle 模块<br>用于序列化的两个模块<br>json，用于字符串 和 python数据类型间进行转换<br>pickle，用于python特有的类型 和 python的数据类型间进行转换<br>pickle模块提供了四个功能：dumps、dump(序列化，存）、loads（反序列化，读）、load  （不仅可以序列化字典，列表…<strong>可以把python中任意的数据类型序列化</strong>）<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">dic = &#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;v1&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;v2&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>:<span class="string">&#x27;v3&#x27;</span>&#125;</span><br><span class="line">str_dic = pickle.dumps(dic)</span><br><span class="line">print(str_dic)  <span class="comment">#一串二进制内容</span></span><br><span class="line"></span><br><span class="line">dic2 = pickle.loads(str_dic)</span><br><span class="line">print(dic2)    <span class="comment">#字典</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">struct_time  = time.localtime(<span class="number">1000000000</span>)</span><br><span class="line">print(struct_time)</span><br><span class="line">f = open(<span class="string">&#x27;pickle_file&#x27;</span>,<span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">pickle.dump(struct_time,f)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">&#x27;pickle_file&#x27;</span>,<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">struct_time2 = pickle.load(f)</span><br><span class="line">print(struct_time2.tm_year)</span><br><span class="line"></span><br><span class="line">pickle</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>这时候机智的你又要说了，既然pickle如此强大，为什么还要学json呢？<br>这里我们要说明一下，json是一种所有的语言都可以识别的数据结构。<br>如果我们将一个字典或者序列化成了一个json存在文件里，那么java代码或者js代码也可以拿来用。<br>但是如果我们用pickle进行序列化，其他语言就不能读懂这是什么了～<br>所以，如果你序列化的内容是列表或者字典，我们非常推荐你使用json模块<br>但如果出于某种原因你不得不序列化其他的数据类型，而未来你还会用python对这个数据进行反序列化的话，那么就可以使用pickle</p>
<ol start="9">
<li>shutil模块<br>高级的 文件、文件夹、压缩包 处理模块<br>shutil.copyfileobj(fsrc, fdst[, length])<br>将文件内容拷贝到另一个文件中<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import shutil</span><br><span class="line">shutil.copyfileobj(open(&#39;old.xml&#39;,&#39;r&#39;), open(&#39;new.xml&#39;, &#39;w&#39;))</span><br></pre></td></tr></table></figure>
shutil.copyfile(src, dst)<br>拷贝文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copyfile(&#39;f1.log&#39;, &#39;f2.log&#39;) #目标文件无需存在</span><br></pre></td></tr></table></figure>
shutil.copymode(src, dst)<br>仅拷贝权限。内容、组、用户均不变<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copymode(&#39;f1.log&#39;, &#39;f2.log&#39;) #目标文件必须存在</span><br></pre></td></tr></table></figure>
shutil.copystat(src, dst)<br>仅拷贝状态的信息，包括：mode bits, atime, mtime, flags<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutil.copystat(&#39;f1.log&#39;, &#39;f2.log&#39;) #目标文件必须存在</span><br></pre></td></tr></table></figure>
shutil.copy(src, dst)<br>拷贝文件和权限<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import shutil</span><br><span class="line">shutil.copy(&#39;f1.log&#39;, &#39;f2.log&#39;)</span><br></pre></td></tr></table></figure>
shutil.copy2(src, dst)<br>拷贝文件和状态信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import shutil</span><br><span class="line">shutil.copy2(&#39;f1.log&#39;, &#39;f2.log&#39;)</span><br></pre></td></tr></table></figure>
shutil.ignore_patterns(*patterns)<br>shutil.copytree(src, dst, symlinks=False, ignore=None)<br>递归的去拷贝文件夹<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import shutil</span><br><span class="line">shutil.copytree(&#39;folder1&#39;, &#39;folder2&#39;, ignore&#x3D;shutil.ignore_patterns(&#39;*.pyc&#39;, &#39;tmp*&#39;)) #目标目录不能存在，注意对folder2目录父级目录要有可写权限，ignore的意思是排除 </span><br></pre></td></tr></table></figure>
拷贝软连接<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import shutil</span><br><span class="line"></span><br><span class="line">shutil.copytree(&#39;f1&#39;, &#39;f2&#39;, symlinks&#x3D;True, ignore&#x3D;shutil.ignore_patterns(&#39;*.pyc&#39;, &#39;tmp*&#39;))</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">通常的拷贝都把软连接拷贝成硬链接，即对待软连接来说，创建新的文件</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line">拷贝软连接</span><br></pre></td></tr></table></figure>
shutil.rmtree(path[, ignore_errors[, onerror]])<br>递归的去删除文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import shutil</span><br><span class="line">shutil.rmtree(&#39;folder1&#39;)</span><br></pre></td></tr></table></figure>
<p>shutil.move(src, dst)<br>递归的去移动文件，它类似mv命令，其实就是重命名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import shutil</span><br><span class="line">shutil.move(&#39;folder1&#39;, &#39;folder3&#39;)</span><br></pre></td></tr></table></figure>
<p>shutil.make_archive(base_name, format,…)<br>创建压缩包并返回文件路径，例如：zip、tar<br>创建压缩包并返回文件路径，例如：zip、tar<br>base_name： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目录，否则保存至指定路径，<br>如 data_bak                       =&gt;保存至当前路径<br>如：/tmp/data_bak =&gt;保存至/tmp/<br>format： 压缩包种类，“zip”, “tar”, “bztar”，“gztar”<br>root_dir： 要压缩的文件夹路径（默认当前目录）<br>owner： 用户，默认当前用户<br>group： 组，默认当前组<br>logger： 用于记录日志，通常是logging.Logger对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将 /data 下的文件打包放置当前程序目录</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">ret = shutil.make_archive(<span class="string">&quot;data_bak&quot;</span>, <span class="string">&#x27;gztar&#x27;</span>, root_dir=<span class="string">&#x27;/data&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#将 /data下的文件打包放置 /tmp/目录</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">ret = shutil.make_archive(<span class="string">&quot;/tmp/data_bak&quot;</span>, <span class="string">&#x27;gztar&#x27;</span>, root_dir=<span class="string">&#x27;/data&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>shutil 对压缩包的处理是调用 ZipFile 和 TarFile 两个模块来进行的，详细：<br>zipfile压缩解压缩</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">z = zipfile.ZipFile(<span class="string">&#x27;laxi.zip&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">z.write(<span class="string">&#x27;a.log&#x27;</span>)</span><br><span class="line">z.write(<span class="string">&#x27;data.data&#x27;</span>)</span><br><span class="line">z.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">z = zipfile.ZipFile(<span class="string">&#x27;laxi.zip&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">z.extractall(path=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">z.close()</span><br><span class="line"></span><br><span class="line">zipfile压缩解压缩</span><br></pre></td></tr></table></figure>

<p>tarfile压缩解压缩</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import tarfile</span><br><span class="line"></span><br><span class="line"># 压缩</span><br><span class="line">&gt;&gt;&gt; t&#x3D;tarfile.open(&#39;&#x2F;tmp&#x2F;egon.tar&#39;,&#39;w&#39;)</span><br><span class="line">&gt;&gt;&gt; t.add(&#39;&#x2F;test1&#x2F;a.py&#39;,arcname&#x3D;&#39;a.bak&#39;)</span><br><span class="line">&gt;&gt;&gt; t.add(&#39;&#x2F;test1&#x2F;b.py&#39;,arcname&#x3D;&#39;b.bak&#39;)</span><br><span class="line">&gt;&gt;&gt; t.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 解压</span><br><span class="line">&gt;&gt;&gt; t&#x3D;tarfile.open(&#39;&#x2F;tmp&#x2F;egon.tar&#39;,&#39;r&#39;)</span><br><span class="line">&gt;&gt;&gt; t.extractall(&#39;&#x2F;egon&#39;)</span><br><span class="line">&gt;&gt;&gt; t.close()</span><br><span class="line"></span><br><span class="line">tarfile压缩解压缩</span><br></pre></td></tr></table></figure>



<ol start="10">
<li>re模块<br><img src="https://cdn.jsdelivr.net/gh/Waylonwhynot/whatyouneed_blog_pic/pic/%E6%AD%A3%E5%88%99.png" alt="py-day04"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># res = re.findall(&#x27;\w&#x27;,&#x27;hello wo_r++ld 123&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;w&#x27;, &#x27;o&#x27;, &#x27;_&#x27;, &#x27;r&#x27;, &#x27;l&#x27;, &#x27;d&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;\W&#x27;,&#x27;hello wo_r++ld 123&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27; &#x27;, &#x27;+&#x27;, &#x27;+&#x27;, &#x27; &#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;\W&#x27;,&#x27;hello wo_r++ld 123&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27; &#x27;, &#x27;+&#x27;, &#x27;+&#x27;, &#x27; &#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;\s&#x27;,&#x27;hello world 123&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27; &#x27;, &#x27; &#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;\S&#x27;,&#x27;hello world 123&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;w&#x27;, &#x27;o&#x27;, &#x27;r&#x27;, &#x27;l&#x27;, &#x27;d&#x27;, &#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;\d&#x27;,&#x27;hello world 123&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;\D&#x27;,&#x27;hello world 123&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27; &#x27;, &#x27;w&#x27;, &#x27;o&#x27;, &#x27;r&#x27;, &#x27;l&#x27;, &#x27;d&#x27;, &#x27; &#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;\Aalex&#x27;, &#x27; alexis sb&#x27;)   # 只能开头匹配</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># []</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;\Aalex&#x27;, &#x27;alexis sb&#x27;)   # 只能开头匹配</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27;alex&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;sb\Z&#x27;, &#x27;alexis sb &#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27;sb&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;sb$&#x27;, &#x27;alexis alex sb&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27;sb&#x27;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;^alex&#x27;, &#x27;alexis alex sb&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># [&#x27;alex&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># res = re.findall(&#x27;^alex$&#x27;, &#x27;alexis alex sb&#x27;)</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"><span class="comment"># []</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;^h&#x27;,&#x27;hello egon 123&#x27;))</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;3$&#x27;,&#x27;hello egon 123&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#####重复普匹配</span></span><br><span class="line"><span class="comment"># 1.: 代表匹配一个字符，该字符可以是除了换行符\n之外的任意字符</span></span><br><span class="line"><span class="comment"># print(re.findall(&quot;a.c&quot;,&quot;alc a+c abc aAc a c aaaaaac a\nc a\tc&quot;))</span></span><br><span class="line"><span class="comment"># # [&#x27;alc&#x27;, &#x27;a+c&#x27;, &#x27;abc&#x27;, &#x27;aAc&#x27;, &#x27;a c&#x27;, &#x27;aac&#x27;, &#x27;a\tc&#x27;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># print(re.findall(&quot;a.c&quot;,&quot;alc a+c abc aAc a c aaaaaac a\nc a\tc&quot;,re.DOTALL))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.*：左侧字符重复次数0次或无穷次，性格贪婪</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;ab*&#x27;,&#x27;a ab abb abbbbbbbb bbbbbbbbbb&#x27;))</span></span><br><span class="line"><span class="comment"># [&#x27;a&#x27;, &#x27;ab&#x27;, &#x27;abb&#x27;, &#x27;abbbbbbbb&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. +:左侧字符重复1次或者无穷次，性格贪婪</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;ab+&#x27;,&#x27;a ab abb abbbbbbbb bbbbbbbbbb&#x27;))</span></span><br><span class="line"><span class="comment"># [&#x27;ab&#x27;, &#x27;abb&#x27;, &#x27;abbbbbbbb&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.左侧字符0粗或1次，性格贪婪</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;ab?&#x27;,&#x27;a ab abb abbbbbbbb bbbbbbbbbb&#x27;))</span></span><br><span class="line"><span class="comment"># [&#x27;a&#x27;, &#x27;ab&#x27;, &#x27;ab&#x27;, &#x27;ab&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.&#123;n,m&#125; 左侧字符重复n次到m次，性格贪婪</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;ab&#123;2,5&#125;&#x27;,&#x27;a ab abb abbbbbbbb bbbbbbbbbb&#x27;))</span></span><br><span class="line"><span class="comment"># [&#x27;abb&#x27;, &#x27;abbbbb&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;\d+\.?\d*&#x27;,&#x27;asdasdasassad123asd1111.13dsf12dfgf1asdffgd3&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># []指定匹配字符的一个</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;a\db&#x27;,&#x27;a1b a3b  a4b a5b a b a\nb&#x27;))</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;a[0-5]b&#x27;,&#x27;a1b a3b  a4b a5b a b a\nb&#x27;))</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;a[0-9a-zA-Z]b&#x27;,&#x27;a1b a3b  a4b a5b azb a b a\nb&#x27;))</span></span><br><span class="line"><span class="comment"># 取反</span></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;a[^0-9a-zA-Z]b&#x27;,&#x27;a1b a3b  a4b a5b azb a b a\nb&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(re.findall(&#x27;a[-0-9]b&#x27;,&#x27;a-b a1b a3b  a4b a5b azb a b a\nb&#x27;))</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="11">
<li>hashlib模块</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 1、什么叫hash:hash是一种算法（3.x里代替了md5模块和sha模块，主要提供 SHA1, SHA224, SHA256, SHA384, SHA512 ，MD5 算法），该算法接受传入的内容，经过运算得到一串hash值</span><br><span class="line"># 2、hash值的特点是：</span><br><span class="line">#2.1 只要传入的内容一样，得到的hash值必然一样&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;要用明文传输密码文件完整性校验</span><br><span class="line">#2.2 不能由hash值返解成内容&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;》把密码做成hash值，不应该在网络传输明文密码</span><br><span class="line">#2.3 只要使用的hash算法不变，无论校验的内容有多大，得到的hash值长度是固定的</span><br></pre></td></tr></table></figure>


<p>hashlib 加密的必须是bytes类型<br>1.常用方法<br>m = hashlib.md5()<br>m.update(‘hello’.encode(‘utf-8’))<br>res = m.hexdigest()</p>
<p>2.也可以直接初始就传值<br>m1 = hashlib.md5(‘he’.encode(‘utf-8’))<br>m1.update(‘llo’.encode(‘utf-8’))</p>
<ul>
<li><p>字符串加密</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line">m = hashlib.md5()</span><br><span class="line">m.update(<span class="string">&#x27;hello&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">m.update(<span class="string">&#x27;world&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">res = m.hexdigest()</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line">m1 = hashlib.md5(<span class="string">&#x27;he&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">m1.update(<span class="string">&#x27;llo&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">m1.update(<span class="string">&#x27;wor&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">m1.update(<span class="string">&#x27;ld&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">res = m1.hexdigest()</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
</li>
<li><p>文件校验（seek随机位置，读取2000个字符）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">m2 = hashlib.md5()</span><br><span class="line">f = open(<span class="string">&#x27;a2.log&#x27;</span>, mode=<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">f.seek(<span class="number">5</span>)</span><br><span class="line">f.read(<span class="number">20</span>)</span><br><span class="line">m2.update(f.read(<span class="number">20</span>))</span><br><span class="line">res4 = m2.hexdigest()</span><br><span class="line">print(res4)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>密码加盐</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">md5</span>(<span class="params">pwd</span>):</span></span><br><span class="line">    <span class="comment"># 实例化对象</span></span><br><span class="line">    obj = hashlib.md5(SALT)</span><br><span class="line">    <span class="comment"># 写入要加密的字节</span></span><br><span class="line">    obj.update(pwd.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="comment"># 获取密文</span></span><br><span class="line">    <span class="keyword">return</span> obj.hexdigest()</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ol start="12">
<li>subprocess模块</li>
</ol>
<ul>
<li>执行系统命令的模块<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  subprocess</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">sh-3.2# ls /Users/egon/Desktop |grep txt$</span></span><br><span class="line"><span class="string">mysql.txt</span></span><br><span class="line"><span class="string">tt.txt</span></span><br><span class="line"><span class="string">事物.txt</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">res1=subprocess.Popen(<span class="string">&#x27;ls /Users/jieli/Desktop&#x27;</span>,shell=<span class="literal">True</span>,stdout=subprocess.PIPE)</span><br><span class="line">res=subprocess.Popen(<span class="string">&#x27;grep txt$&#x27;</span>,shell=<span class="literal">True</span>,stdin=res1.stdout,</span><br><span class="line">                 stdout=subprocess.PIPE)</span><br><span class="line"></span><br><span class="line">print(res.stdout.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#等同于上面,但是上面的优势在于,一个数据流可以和另外一个数据流交互,可以通过爬虫得到结果然后交给grep</span></span><br><span class="line">res1=subprocess.Popen(<span class="string">&#x27;ls /Users/jieli/Desktop |grep txt$&#x27;</span>,shell=<span class="literal">True</span>,stdout=subprocess.PIPE)</span><br><span class="line">print(res1.stdout.read().decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#windows下:</span></span><br><span class="line"><span class="comment"># dir | findstr &#x27;test*&#x27;</span></span><br><span class="line"><span class="comment"># dir | findstr &#x27;txt$&#x27;</span></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">res1=subprocess.Popen(<span class="string">r&#x27;dir C:\Users\Administrator\PycharmProjects\test\函数备课&#x27;</span>,shell=<span class="literal">True</span>,stdout=subprocess.PIPE)</span><br><span class="line">res=subprocess.Popen(<span class="string">&#x27;findstr test*&#x27;</span>,shell=<span class="literal">True</span>,stdin=res1.stdout,</span><br><span class="line">                 stdout=subprocess.PIPE)</span><br><span class="line"></span><br><span class="line">print(res.stdout.read().decode(<span class="string">&#x27;gbk&#x27;</span>)) <span class="comment">#subprocess使用当前系统默认编码，得到结果为bytes类型，在windows下需要用gbk解码</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



</li>
</ul>
<p>1.第三方模块  requests， pymysql， jenkins，gitlab</p>
<p>pip工具，下载安装第三方模块。和yum类似</p>
<p>pip工具安装的包一定是和python的解释器相对应的</p>
<blockquote>
<p>pip3 install 安装的包<br>pip3 uninstall 安装的包<br>pip3 list<br>换源：</p>
</blockquote>
<p>临时换源：</p>
<blockquote>
<p>pip install 包名 -i <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p>
</blockquote>
<p>永久性换源<br>修改 ~/.pip/pip.conf (没有就创建一个)， 内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>

<p>2.requests模块</p>
<blockquote>
<p>爬虫中非常重要的一个模块<br>通过这个模块可以发起http请求，get， post， put， delete方法</p>
</blockquote>
<p>3.pymysql模块</p>
<blockquote>
<p>pip3 install  pymysql</p>
</blockquote>
<p>总结: sql语句的写法是不变。需要关注操作的函数即可。execute</p>
<p>4.redis模块</p>
<blockquote>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.cnblogs.com/john-xiong/p/12089103.html">https://www.cnblogs.com/john-xiong/p/12089103.html</a></p>
</blockquote>
<p>5.gitlab模块</p>
<p>生成token： settings ===&gt; accesstoken ===&gt; create 生成</p>
<blockquote>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://pypi.org/project/python-gitlab/">https://pypi.org/project/python-gitlab/</a></p>
</blockquote>
<ul>
<li>ATM作业</li>
<li>python操作 docker， k8s， saltstack， ansible</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">Waylon Yan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/posts/42241.html">http://yoursite.com/posts/42241.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener external nofollow noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/note/">note</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/26048.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">py-基础05</div></div></a></div><div class="next-post pull-right"><a href="/posts/26432.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">py-基础03</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/posts/5306.html" title="MySQL-SQL审核工具inception"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-01</div><div class="title">MySQL-SQL审核工具inception</div></div></a></div><div><a href="/posts/37998.html" title="Promethues03"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-01</div><div class="title">Promethues03</div></div></a></div><div><a href="/posts/22846.html" title="Python-常用库-jsonpath"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-04-21</div><div class="title">Python-常用库-jsonpath</div></div></a></div><div><a href="/posts/10699.html" title="Service-Mesh02"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-23</div><div class="title">Service-Mesh02</div></div></a></div><div><a href="/posts/21679.html" title="Promethues02"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-30</div><div class="title">Promethues02</div></div></a></div><div><a href="/posts/10379.html" title="Service-Mesh01"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-06</div><div class="title">Service-Mesh01</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Waylon Yan</div><div class="author-info__description">tech life sharing</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">268</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">42</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">26</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Waylonwhynot" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:ywl1006@outlook.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">无止境</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">复习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E9%83%A8%E5%88%86%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">模块部分：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%85%E9%83%A8%E5%88%86%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">包部分：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%8C%85%E5%B0%B1%E6%98%AF%E5%8C%85%E5%90%AB%E6%9C%89init-py%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%9B"><span class="toc-number">3.1.</span> <span class="toc-text">1.包就是包含有init.py的文件夹；</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%8C%85%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%80%E7%A7%8D%E5%BD%A2%E5%BC%8F%EF%BC%8C%E5%8C%85%E6%98%AF%E7%94%A8%E6%9D%A5%E5%BD%93%E5%81%9A%E6%A8%A1%E5%9D%97%E5%AF%BC%E5%85%A5%E7%9A%84"><span class="toc-number">3.2.</span> <span class="toc-text">2.包的本质是文件的一种形式，包是用来当做模块导入的</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%BA%E8%B0%83-%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text">强调 - 包的使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%9D%E5%AF%B9%E5%AF%BC%E5%85%A5%E4%B8%8E%E7%9B%B8%E5%AF%B9%E5%AF%BC%E5%85%A5"><span class="toc-number">3.4.</span> <span class="toc-text">绝对导入与相对导入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E5%8C%85%E7%9A%84%E4%BD%BF%E7%94%A8%E9%9C%80%E8%A6%81%E7%89%A2%E8%AE%B0%E4%B8%89%E7%82%B9"><span class="toc-number">3.5.</span> <span class="toc-text">总结包的使用需要牢记三点</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E9%87%8C%E9%9D%A2%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="toc-number">4.</span> <span class="toc-text">项目里面需要注意：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E5%91%A8%E5%86%85%E5%AE%B9%EF%BC%9A"><span class="toc-number">5.</span> <span class="toc-text">本周内容：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97%E7%9B%B4%E5%A5%94%E4%B8%BB%E9%A2%98%E7%89%88"><span class="toc-number">5.1.</span> <span class="toc-text">日志模块直奔主题版</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/5677.html" title="AI-08-A2A"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI-08-A2A"/></a><div class="content"><a class="title" href="/posts/5677.html" title="AI-08-A2A">AI-08-A2A</a><time datetime="2025-06-21T07:22:33.000Z" title="Created 2025-06-21 15:22:33">2025-06-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/18525.html" title="AI-07-MCP"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI-07-MCP"/></a><div class="content"><a class="title" href="/posts/18525.html" title="AI-07-MCP">AI-07-MCP</a><time datetime="2025-06-08T06:19:30.000Z" title="Created 2025-06-08 14:19:30">2025-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/65143.html" title="AI-06-dify"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI-06-dify"/></a><div class="content"><a class="title" href="/posts/65143.html" title="AI-06-dify">AI-06-dify</a><time datetime="2025-06-08T06:19:08.000Z" title="Created 2025-06-08 14:19:08">2025-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/45471.html" title="AI-05-coze"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI-05-coze"/></a><div class="content"><a class="title" href="/posts/45471.html" title="AI-05-coze">AI-05-coze</a><time datetime="2025-05-17T15:16:48.000Z" title="Created 2025-05-17 23:16:48">2025-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/34613.html" title="AI-04-提示词工程"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="AI-04-提示词工程"/></a><div class="content"><a class="title" href="/posts/34613.html" title="AI-04-提示词工程">AI-04-提示词工程</a><time datetime="2025-05-17T15:15:51.000Z" title="Created 2025-05-17 23:15:51">2025-05-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Waylon Yan</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Local search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>